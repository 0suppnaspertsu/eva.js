!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@ali/lottie-core"),require("pixi.js")):"function"==typeof define&&define.amd?define(["exports","@ali/lottie-core","pixi.js"],e):e((t=t||self).PIXI=t.PIXI||{},t.LOTTIE,t.PIXI)}(this,function(t,b,k){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function o(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?n(t):e}var a=function(t){function i(t){var e;return T(this,i),(e=P(this,w(i).call(this))).parentCompBox=t,e.lineStyle(0),e}return h(i,k.Graphics),o(i,[{key:"updateLayerMask",value:function(t){for(var e=0;e<t.viewData.length;e++){if(t.viewData[e].inv){var i=this.parentCompBox;this.moveTo(0,0),this.lineTo(i.w,0),this.lineTo(i.w,i.h),this.lineTo(0,i.h),this.lineTo(0,0)}var s=t.viewData[e].v,n=s.v[0];this.moveTo(n[0],n[1]);for(var r=s._length,a=1;a<r;a++){var o=s.o[a-1],h=s.i[a],l=s.v[a];this.bezierCurveTo(o[0],o[1],h[0],h[1],l[0],l[1])}var u=s.o[a-1],p=s.i[0],c=s.v[0];this.bezierCurveTo(u[0],u[1],p[0],p[1],c[0],c[1]),t.viewData[e].inv&&this.addHole()}}},{key:"updateMasks",value:function(t){this.clear(),this.beginFill(0),this.updateLayerMask(t),this.endFill()}}]),i}(),r=function(t){function i(t){var e;return T(this,i),(e=P(this,w(i).call(this))).viewport=t,e.lineStyle(0),e.initCompMask(),e}return h(i,k.Graphics),o(i,[{key:"initCompMask",value:function(){this.clear(),this.beginFill(0);var t=this.viewport;this.moveTo(0,0),this.lineTo(t.w,0),this.lineTo(t.w,t.h),this.lineTo(0,t.h),this.lineTo(0,0),this.endFill()}}]),i}(),l=function(t){function s(t,e){var i;return T(this,s),(i=P(this,w(s).call(this))).lottieElement=t,i.config=e,i}return h(s,k.Container),o(s,[{key:"onSetupLottie",value:function(){if(this.config.maskComp){var t=this.config.viewport;this.preCompMask=new r(t),this.mask=this.preCompMask,this.addChild(this.mask)}if(this.lottieElement.hasValidMasks()){var e=this.config.session.local;if(this.graphicsMasks=new a(e),this.mask){var i=new k.Container;i.mask=this.graphicsMasks,i.addChild(this.mask),this.lottieElement.innerDisplay=i,this.addChild(i)}else this.mask=this.graphicsMasks,this.addChild(this.mask)}}},{key:"setHierarchy",value:function(t){this.hierarchy=t}},{key:"show",value:function(){this.visible=!0}},{key:"hide",value:function(){this.visible=!1}},{key:"updateLottieTransform",value:function(t){this.x=t.x,this.y=t.y,this.pivot.x=t.anchorX,this.pivot.y=t.anchorY,this.scale.x=t.scaleX,this.scale.y=t.scaleY,this.rotation=t.rotation,this.alpha=t.alpha}},{key:"updateLottieMasks",value:function(t){this.graphicsMasks&&this.graphicsMasks.updateMasks(t)}}]),s}(),u=function(t){function e(t){return T(this,e),P(this,w(e).call(this,t,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","}"].join("\n"),["uniform float alpha;","uniform vec3 color;","void main(void){","   gl_FragColor = vec4(color * alpha, alpha);","}"].join("\n")))}return h(e,k.Shader),e}();function p(t,e){this.buffer=new t(10),this.length=0}p.prototype={reset:function(){this.length=0},destroy:function(){this.buffer=null,this.length=0},push:function(){if(this.length+arguments.length>this.buffer.length){var t=new this.buffer.constructor(Math.max(this.length+arguments.length,Math.round(2*this.buffer.length)));t.set(this.buffer,0),this.buffer=t}for(var e=0;e<arguments.length;e++)this.buffer[this.length++]=e<0||arguments.length<=e?void 0:arguments[e];return this.length},setBuffer:function(t){this.buffer=t,this.length=this.buffer.length}};var c=function(){function s(t,e,i){T(this,s),this.gl=t,this.vertices=new p(Float32Array),this.indices=new p(Uint16Array),this.buffer=k.glCore.GLBuffer.createVertexBuffer(t),this.indexBuffer=k.glCore.GLBuffer.createIndexBuffer(t),this.dirty=!0,this.shader=e,this.vao=new k.glCore.VertexArrayObject(t,i).addIndex(this.indexBuffer).addAttribute(this.buffer,e.attributes.aVertexPosition,t.FLOAT,!1,8,0)}return o(s,[{key:"reset",value:function(){this.vertices.reset(),this.indices.reset()}},{key:"upload",value:function(){this.buffer.upload(this.vertices.buffer),this.indexBuffer.upload(this.indices.buffer),this.dirty=!1}},{key:"destroy",value:function(){this.vertices.destroy(),this.indices.destroy(),this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null}}]),s}(),d=1,x=10;function rt(t,e){return Math.sqrt(t*t+e*e)}function M(t,e,i,s,n){return(l=1-t)*l*l*e+3*(h=1-(o=t))*h*o*i+3*(1-(a=t))*a*a*s+(r=t)*r*r*n;var r,a,o,h,l}function f(t,e,i,s,n,r,a){if(!(isFinite(e)&&isFinite(i)&&isFinite(s)&&isFinite(n)&&isFinite(r)&&isFinite(a)))return t;for(var o,h,l,u,p,c,f,d,y=t[t.length-2],m=t[t.length-1],v=(p=(l=s)-(o=e),c=(u=n)-(h=i),f=o-y,d=h-m,rt(r-l,a-u)+rt(p,c)+rt(f,d)),g=Math.min(x/v,.5),b=g;b<1;b+=g){var k=M(b,y,e,s,r),T=M(b,m,i,n,a);t.push(k,T)}return t.push(r,a),t}function at(t,e){for(var i=0;i<t.length;i++){var s=t[i],n=s.cmd,r=s.args;switch(n){case"M":case"L":a=e,o=r[0],h=r[1],a.push(o,h);break;case"C":f(e,r[0],r[1],r[2],r[3],r[4],r[5])}}var a,o,h;return e}function ot(t,e,i,s,n,r,a){n%=2*Math.PI,r%=2*Math.PI,n<0&&(n+=2*Math.PI),r<0&&(r+=2*Math.PI),r<=n&&(r+=2*Math.PI);var o=r-n,h=1;a&&(h=-1,0==(o=2*Math.PI-o)&&(o=2*Math.PI));for(var l=o*s,u=Math.sqrt(l/d)>>0,p=o/(u=u%2==0?u+1:u),c=n,f=0;f<u+1;f++)t.push(e,i,e+s*Math.cos(c),i+s*Math.sin(c)),c+=h*p}function y(t,e,i){for(var s,n=at(t.cmds,[]),r=t.isClosed,a=2<=e.lineDash.length,o=e.lineWidth/2,h=[n[0],n[1]],l=2;l<n.length;l+=2)n[l]==h[h.length-2]&&n[l+1]==h[h.length-1]||h.push(n[l],n[l+1]);if(!r||h[h.length-2]==h[0]&&h[h.length-1]==h[1]||h.push(h[0],h[1]),a){var u=function(t,e,i,s){e&&t.push(t[0],t[1]);for(var n=s,r=0,a=1;n>i[r];)n-=i[r],a=a?0:1,++r==i.length&&(r=0);for(var o=[t[0],t[1]],h=[a],l=2;l<t.length;l+=2){var u=[t[l]-t[l-2],t[l+1]-t[l-1]],p=rt(u[0],u[1]);u[0]/=p,u[1]/=p;for(var c=0;p-c+n>=i[r];)c+=i[r]-n,n=0,a=a?0:1,++r==i.length&&(r=0),h.push(a),o.push(t[l-2]+c*u[0],t[l-1]+c*u[1]);p-c!=0&&(o.push(t[l],t[l+1]),h.push(a)),n+=p-c}return e&&(t.pop(),t.pop(),o.pop(),o.pop(),h.pop()),{newPoints:o,toDrawOrNotToDraw:h}}(h,r,e.lineDash,e.lineDashOffset);s=u.toDrawOrNotToDraw,h=u.newPoints}var p=i.length,c=i.length,f=[];if(r)h.push(h[2],h[3]);else{var d=[h[2]-h[0],h[3]-h[1]],y=rt(d[0],d[1]);d[0]/=y,d[1]/=y;var m=[-d[1],d[0]],v=[h[0]+o*m[0],h[1]+o*m[1]],g=[h[0]-o*m[0],h[1]-o*m[1]];if("butt"==e.lineCap)i.push(v[0],v[1],g[0],g[1]);else if("square"==e.lineCap)i.push(v[0]-o*d[0],v[1]-o*d[1],g[0]-o*d[0],g[1]-o*d[1]);else{i.push(h[0],h[1],v[0],v[1]);var b=Math.atan2(v[1]-h[1],v[0]-h[0]),k=Math.atan2(g[1]-h[1],g[0]-h[0]);ot(i,h[0],h[1],o,b,k),i.push(h[0],h[1],g[0],g[1]),i.push(v[0],v[1],g[0],g[1])}if(a){for(var T=s[0],w=c;w<i.length;w+=2)f.push(T);c=i.length}}for(var P=2;P<h.length-2;P+=2){var x=[h[P]-h[P-2],h[P+1]-h[P-1]],M=[-x[1],x[0]],C=rt(M[0],M[1]);M[0]/=C,M[1]/=C;var D=[h[P+2]-h[P],h[P+3]-h[P+1]];C=rt(D[0],D[1]),D[0]/=C,D[1]/=C;var O=[h[P]-h[P-2],h[P+1]-h[P-1]];C=rt(O[0],O[1]),O[0]/=C,O[1]/=C;var S=[O[0]+D[0],O[1]+D[1]],_=0,L=void 0,I=void 0;0<(C=rt(S[0],S[1]))?(S[0]/=C,S[1]/=C,_=o/(L=(I=[-S[1],S[0]])[0]*M[0]+I[1]*M[1])):(_=0,I=[-S[1],S[0]]);var E=[h[P]+_*I[0],h[P+1]+_*I[1]],A=[h[P]-_*I[0],h[P+1]-_*I[1]];if("miter"==e.lineJoin&&1/L<=e.miterLimit)i.push(E[0],E[1],A[0],A[1]);else{var B=O[1]*D[0]-O[0]*D[1];if("round"==e.lineJoin)if(B<0){var R=[h[P]+O[1]*o,h[P+1]-O[0]*o],j=[h[P]+D[1]*o,h[P+1]-D[0]*o];i.push(E[0],E[1],R[0],R[1]);var F=Math.atan2(R[1]-h[P+1],R[0]-h[P]),z=Math.atan2(j[1]-h[P+1],j[0]-h[P]);ot(i,h[P],h[P+1],o,F,z),i.push(E[0],E[1],j[0],j[1])}else{var X=[h[P]-O[1]*o,h[P+1]+O[0]*o],G=[h[P]-D[1]*o,h[P+1]+D[0]*o];i.push(X[0],X[1],A[0],A[1]);var W=Math.atan2(G[1]-h[P+1],G[0]-h[P]),U=Math.atan2(X[1]-h[P+1],X[0]-h[P]);ot(i,h[P],h[P+1],o,W,U),i.push(G[0],G[1],A[0],A[1])}else if(B<0){var N=[h[P]+O[1]*o,h[P+1]-O[0]*o],q=[h[P]+D[1]*o,h[P+1]-D[0]*o];i.push(E[0],E[1],N[0],N[1],E[0],E[1],q[0],q[1])}else{var Y=[h[P]-O[1]*o,h[P+1]+O[0]*o],J=[h[P]-D[1]*o,h[P+1]+D[0]*o];i.push(Y[0],Y[1],A[0],A[1],J[0],J[1],A[0],A[1])}}if(a){for(var V=s[P/2],H=c;H<i.length;H+=2)f.push(V);c=i.length}}if(r)i.push(i.buffer[p],i.buffer[p+1],i.buffer[p+2],i.buffer[p+3]);else{var $=[h[h.length-2]-h[h.length-4],h[h.length-1]-h[h.length-3]],K=Math.sqrt(Math.pow($[0],2)+Math.pow($[1],2));$[0]/=K,$[1]/=K;var Q=[-$[1],$[0]],Z=[h[h.length-2]+o*Q[0],h[h.length-1]+o*Q[1]],tt=[h[h.length-2]-o*Q[0],h[h.length-1]-o*Q[1]];if("butt"==e.lineCap)i.push(Z[0],Z[1],tt[0],tt[1]);else if("square"==e.lineCap)i.push(Z[0]+o*$[0],Z[1]+o*$[1],tt[0]+o*$[0],tt[1]+o*$[1]);else{i.push(Z[0],Z[1],tt[0],tt[1]),i.push(h[h.length-2],h[h.length-1],tt[0],tt[1]);var et=Math.atan2(tt[1]-h[h.length-1],tt[0]-h[h.length-2]),it=Math.atan2(Z[1]-h[h.length-1],Z[0]-h[h.length-2]);ot(i,h[h.length-2],h[h.length-1],o,et,it),i.push(h[h.length-2],h[h.length-1],Z[0],Z[1])}}if(a){for(var st=s[s.length-1],nt=c;nt<i.length;nt+=2)f.push(st);c=i.length}return f}function C(t,e){for(var i=t.isClosed,s=!0,n=at(t.cmds,[]),r=[n[0],n[1]],a=2;a<n.length;a+=2)n[a]==r[r.length-2]&&n[a+1]==r[r.length-1]||r.push(n[a],n[a+1]);if(!i||r[r.length-2]==r[0]&&r[r.length-1]==r[1]||r.push(r[0],r[1]),6<=r.length){for(var o=0;o<r.length;o++)e.push(r[o]);s=!1}return s}var m=function(t){function i(t){var e;return T(this,i),(e=P(this,w(i).call(this,t))).graphicsDataPool=[],e.primitiveShader=null,e.webGLData=null,e.gl=t.gl,e.CONTEXT_UID=0,e}return h(i,k.ObjectRenderer),o(i,[{key:"onContextChange",value:function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new u(this.gl)}},{key:"destroy",value:function(){k.ObjectRenderer.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null}},{key:"render",value:function(t){var e=this.renderer,i=e.gl,s=this.getWebGLData(t);if(t.isDirty&&this.updateGraphics(t,s),0!==s.indices.length){var n=this.primitiveShader;e.bindShader(n),e.state.setBlendMode(t.blendMode),n.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),n.uniforms.color=k.utils.hex2rgb(t.color),n.uniforms.alpha=t.worldAlpha,e.bindVao(s.vao),s.vao.draw(i.TRIANGLES,s.indices.length)}}},{key:"updateGraphics",value:function(t,e){e.reset(),"stroke"===t.drawType?this.buildStroke(t,e):this.buildFill(t,e),t.isDirty=!1}},{key:"buildStroke",value:function(t,e){for(var i=e.vertices,s=e.indices,n=t.paths,r=t.lineStyle,a=2<=r.lineDash.length,o=0;o<n.length;o++){var h=n[o],l=i.length/2,u=y(h,r,i);if(a)for(var p=l+2;p<i.length/2;p+=2)u[p-l-1]&&s.push(p-2,p,p-1,p,p+1,p-1);else for(var c=l+2;c<i.length/2;c+=2)s.push(c-2,c,c-1,c,c+1,c-1)}e.upload()}},{key:"buildFill",value:function(t,e){for(var i=e.vertices,s=e.indices,n=t.paths,r=[],a=[],o=0;o<n.length;o++){var h=n[o],l=[];if(C(h,l))break;for(var u=h.holes,p=[],c=0;c<u.length;c++){var f=u[c],d=l.length;if(C(f,l))break;p.push(d/2)}for(var y=k.utils.earcut(l,p,2),m=r.length/2,v=0;v<l.length;v+=2)r.push(l[v],l[v+1]);for(var g=0;g<y.length;g+=3)a.push(m+y[g],m+y[g+1],m+y[g+2])}r.length<6||a<3||(i.setBuffer(new Float32Array(r)),s.setBuffer(new Uint16Array(a)),e.upload())}},{key:"getWebGLData",value:function(t){return t.webGLData&&this.CONTEXT_UID===t.webGLData.CONTEXT_UID||(t.webGLData=new c(this.renderer.gl,this.primitiveShader,this.renderer.state.attribState),t.webGLData.CONTEXT_UID=this.CONTEXT_UID),t.webGLData}}]),i}();k.WebGLRenderer.registerPlugin("lottiegraphics",m);var v=function(){function e(t){T(this,e),this.renderer=t}return o(e,[{key:"destroy",value:function(){this.renderer=null}},{key:"render",value:function(t){var e=this.renderer,i=e.context,s=t.lineStyle,n=t.worldAlpha,r=t.transform.worldTransform,a=e.resolution;i.setTransform(r.a*a,r.b*a,r.c*a,r.d*a,r.tx*a,r.ty*a),e.setBlendMode(t.blendMode),i.globalAlpha=n,"stroke"===t.drawType?(i.lineWidth=s.lineWidth,i.lineJoin=s.lineJoin,i.miterLimit=s.miterLimit,i.lineCap=s.lineCap,i.lineDashOffset=s.lineDashOffset,i.setLineDash(s.lineDash||[]),this.buildStroke(t)):this.buildFill(t)}},{key:"buildStroke",value:function(t){var e=this.renderer.context,i="#".concat("00000".concat((0|t.color).toString(16)).substr(-6)),s=t.paths,n=t.lineStyle;e.lineWidth=n.lineWidth,e.lineJoin=n.lineJoin,e.miterLimit=n.miterLimit,e.lineCap=n.lineCap,e.lineDashOffset=n.lineDashOffset,e.setLineDash(n.lineDash||[]),e.beginPath();for(var r=0;r<s.length;r++)this.drawPath(e,s[r]);e.strokeStyle=i,e.stroke()}},{key:"buildFill",value:function(t){var e=this.renderer.context,i="#".concat("00000".concat((0|t.color).toString(16)).substr(-6)),s=t.paths;e.beginPath();for(var n=0;n<s.length;n++){var r=s[n];this.drawPath(e,r);for(var a=0;a<r.holes.length;a++)this.drawPath(e,r.holes[a])}e.fillStyle=i,e.fill()}},{key:"drawPath",value:function(t,e){for(var i=0;i<e.cmds.length;i++){var s=e.cmds[i],n=s.cmd,r=s.args;switch(n){case"M":t.moveTo(r[0],r[1]);break;case"L":t.lineTo(r[0],r[1]);break;case"C":t.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5])}}}}]),e}();k.CanvasRenderer.registerPlugin("lottiegraphics",v);var g=function(){function t(){T(this,t),this.cmds=[],this.holes=[],this.isClosed=!1,this.isClockWise=!1}return o(t,[{key:"getLength",value:function(){return this.cmds.length}},{key:"add",value:function(t,e){this.cmds.push({cmd:t,args:e})}},{key:"moveTo",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;this.add("M",[t,e])}},{key:"lineTo",value:function(t,e){this.add("L",[t,e])}},{key:"bezierCurveTo",value:function(t,e,i,s,n,r){this.add("C",[t,e,i,s,n,r])}},{key:"closePath",value:function(){this.isClosed=!0}}]),t}(),D=function(t){function e(){var t;return T(this,e),(t=P(this,w(e).call(this))).paths=[],t._samplerPoints=[],t.currentPath=null,t.color=0,t.lineStyle={lineWidth:1,lineJoin:"miter",miterLimit:10,lineCap:"butt",lineDash:[],lineDashOffset:0},t.isDirty=!0,t.drawType="",t.blendMode=k.BLEND_MODES.NORMAL,t.webGLData=null,t.firstIsClockWise=!0,t.preClockWiseStatus=null,t}return h(e,k.Container),o(e,[{key:"clear",value:function(){this.paths.length=0,this.currentPath=null,this.firstIsClockWise=!0,this.preClockWiseStatus=null,this.isDirty=!0}},{key:"moveTo",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;this.endPath(),this.currentPath=new g,this.currentPath.moveTo(t,e),this._samplerPoints.push([t,e])}},{key:"lineTo",value:function(t,e){this.currentPath.lineTo(t,e),this._samplerPoints.push([t,e])}},{key:"bezierCurveTo",value:function(t,e,i,s,n,r){this.currentPath.bezierCurveTo(t,e,i,s,n,r),this._samplerPoints.push([n,r])}},{key:"endPath",value:function(){if(this.currentPath&&1<this.currentPath.getLength()){var t=this.paths.length,e=0<function(t){for(var e=t.length,i=0,s=e-1,n=0;n<e;s=n++)i+=t[s][0]*t[n][1]-t[n][0]*t[s][1];return.5*i}(this._samplerPoints);if(this.currentPath.isClockWise=e,0===t&&(this.firstIsClockWise=e),0<t&&this.preClockWiseStatus===this.firstIsClockWise&&this.preClockWiseStatus!==e)(0<t?this.paths[t-1]:null).holes.push(this.currentPath);else this.paths.push(this.currentPath),this.preClockWiseStatus=e;this.currentPath=null,this.isDirty=!0}this._samplerPoints.length=0}},{key:"closePath",value:function(){this.currentPath.closePath()}},{key:"stroke",value:function(){this.endPath(),this.drawType="stroke"}},{key:"fill",value:function(){null!==this.currentPath&&(this.closePath(),this.endPath(),this.drawType="fill")}},{key:"_renderWebGL",value:function(t){t.setObjectRenderer(t.plugins.lottiegraphics),t.plugins.lottiegraphics.render(this)}},{key:"_renderCanvas",value:function(t){t.plugins.lottiegraphics.render(this)}}]),e}(),O=function(t){function s(t,e){var i;return T(this,s),(i=P(this,w(s).call(this))).lottieElement=t,i.config=e,i.passMatrix=new k.Matrix,i}return h(s,D),o(s,[{key:"setShapeTransform",value:function(){var t=this.lottieElement.preTransforms.finalTransform.props;this.passMatrix.set(t[0],t[1],t[4],t[5],t[12],t[13]),this.transform.setFromMatrix(this.passMatrix)}},{key:"updateTransform",value:function(){this.setShapeTransform(),this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++}},{key:"updateLottieGrahpics",value:function(t){var e=t.type;if(this.clear(),("st"!==e&&"gs"!==e||0!==t.wi)&&t.data._shouldRender&&0!==t.coOp){for(var i=t.elements,s=i.length,n=0;n<s;n+=1)for(var r=i[n].trNodes,a=r.length,o=0;o<a;o++)"m"==r[o].t?this.moveTo(r[o].p[0],r[o].p[1]):"c"==r[o].t?this.bezierCurveTo(r[o].pts[0],r[o].pts[1],r[o].pts[2],r[o].pts[3],r[o].pts[4],r[o].pts[5]):this.closePath();"st"!==e&&"gs"!==e||(t.da?(this.lineStyle.lineDash=t.da,this.lineStyle.lineDashOffset=t.do):this.lineStyle.lineDash=[]),"st"===e||"gs"===e?(this.lineStyle.lineWidth=t.wi,this.lineStyle.lineCap=t.lc,this.lineStyle.lineJoin=t.lj,this.lineStyle.miterLimit=t.ml||0,this.color=b.Tools.rgb2hex(t.co||t.grd),this.alpha=t.coOp,this.stroke()):(this.color=b.Tools.rgb2hex(t.co||t.grd),this.alpha=t.coOp,this.fill())}}}]),s}(),S=function(t){function n(t,e){var i;T(this,n),(i=P(this,w(n).call(this))).lottieElement=t,i.config=e;var s=parseInt(e.color.replace("#",""),16);return i.beginFill(s),i.drawRect(0,0,e.rect.width,e.rect.height),i.endFill(),i}return h(n,k.Graphics),o(n,[{key:"onSetupLottie",value:function(){if(this.lottieElement.hasValidMasks()){var t=this.config.session.local;this.graphicsMasks=new a(t),this.mask=this.graphicsMasks,this.addChild(this.mask)}}},{key:"setHierarchy",value:function(t){this.hierarchy=t}},{key:"show",value:function(){this.visible=!0}},{key:"hide",value:function(){this.visible=!1}},{key:"updateLottieTransform",value:function(t){this.x=t.x,this.y=t.y,this.pivot.x=t.anchorX,this.pivot.y=t.anchorY,this.scale.x=t.scaleX,this.scale.y=t.scaleY,this.rotation=t.rotation,this.alpha=t.alpha}},{key:"updateLottieMasks",value:function(t){this.graphicsMasks&&this.graphicsMasks.updateMasks(t)}}]),n}(),_=function(t){function r(t,e){var i;T(this,r);var s=e.texture,n=e.asset;return i=P(this,w(r).call(this,s)),s.baseTexture.hasLoaded?(s.orig=new k.Rectangle(0,0,n.w,n.h),s._updateUvs()):s.baseTexture.on("loaded",function(){s.orig=new k.Rectangle(0,0,n.w,n.h),s._updateUvs()}),i.lottieElement=t,i.config=e,i}return h(r,k.Sprite),o(r,[{key:"onSetupLottie",value:function(){if(this.lottieElement.hasValidMasks()){var t=this.config.session.local;this.graphicsMasks=new a(t),this.mask=this.graphicsMasks,this.addChild(this.mask)}}},{key:"setHierarchy",value:function(t){this.hierarchy=t}},{key:"show",value:function(){this.visible=!0}},{key:"hide",value:function(){this.visible=!1}},{key:"updateLottieTransform",value:function(t){this.x=t.x,this.y=t.y,this.pivot.x=t.anchorX,this.pivot.y=t.anchorY,this.scale.x=t.scaleX,this.scale.y=t.scaleY,this.rotation=t.rotation,this.alpha=t.alpha}},{key:"updateLottieMasks",value:function(t){this.graphicsMasks&&this.graphicsMasks.updateMasks(t)}}]),r}();b.DisplayRegister.registerDisplayByType(b.DisplayRegister.Type.Null,l),b.DisplayRegister.registerDisplayByType(b.DisplayRegister.Type.Path,O),b.DisplayRegister.registerDisplayByType(b.DisplayRegister.Type.Shape,l),b.DisplayRegister.registerDisplayByType(b.DisplayRegister.Type.Solid,S),b.DisplayRegister.registerDisplayByType(b.DisplayRegister.Type.Sprite,_),b.DisplayRegister.registerDisplayByType(b.DisplayRegister.Type.Component,l),b.DisplayRegister.registerDisplayByType(b.DisplayRegister.Type.Container,k.Container);var L=/^(https?:)?\/\//;var I=function(t){function a(t,e){var i,s=e.prefix,n=e.autoLoad,r=void 0===n||n;return T(this,a),(i=P(this,w(a).call(this))).assets=t,i.prefix=s||"",i.textures={},i._total=0,i._failed=0,i._received=0,i.loaded=!1,r&&i.load(),i}return h(a,b.Eventer),o(a,[{key:"load",value:function(){var n=this;this.assets.forEach(function(t){var e=t.id,i=function(t,e){if(1===t.e)return t.p;e&&(e=e.replace(/\/?$/,"/"));var i=t.u+t.p;return t.up?t.up:L.test(i)?i:e+i}(t,n.prefix),s=k.Texture.fromImage(i,"*");n.textures[e]=s,n._total++,s.baseTexture.hasLoaded?(n._received++,n.emit("update"),n._received+n._failed>=n._total&&n._onComplete()):(s.baseTexture.once("loaded",function(){n._received++,n.emit("update"),n._received+n._failed>=n._total&&n._onComplete()}),s.baseTexture.once("error",function(){n._failed++,n.emit("update"),n._received+n._failed>=n._total&&n._onComplete()}))})}},{key:"_onComplete",value:function(){this.loaded=!0,this.emit("complete"),0<this._failed&&(this._failed>=this._total?this.emit("fail"):this.emit("partlyfail",this._failed))}},{key:"getTextureById",value:function(t){return this.textures[t]}}]),a}();function E(t){return t.response&&"object"===e(t.response)?t.response:t.response&&"string"==typeof t.response?JSON.parse(t.response):t.responseText?JSON.parse(t.responseText):void 0}var A=function(t){function i(t){var e;return T(this,i),(e=P(this,w(i).call(this))).path=t,e.onSuccess=e.onSuccess.bind(n(n(e))),e.onFail=e.onFail.bind(n(n(e))),function(t,e,i){var s,n=new XMLHttpRequest;n.open("GET",t,!0);try{n.responseType="json"}catch(t){console.error("lottie-pixi loadAjax:",t)}n.send(),n.onreadystatechange=function(){if(4==n.readyState)if(200==n.status)s=E(n),e(s);else try{s=E(n),e(s)}catch(t){i&&i(t)}}}(t,e.onSuccess,e.onFail),e}return h(i,b.Eventer),o(i,[{key:"onSuccess",value:function(t){this.emit("success",t),this.emit("complete",t)}},{key:"onFail",value:function(t){this.emit("fail",t),this.emit("error",t)}}]),i}();b.LoaderRegister.registerLoaderByType(b.LoaderRegister.Type.Texture,function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return new I(t,e)}),b.LoaderRegister.registerLoaderByType(b.LoaderRegister.Type.Ajax,function(t){return new A(t)});var B,R,j,F={Linear:{None:function(t){return t}},Ease:{In:(j=new b.BezierEasing(.42,0,1,1),function(t){return j.get(t)}),Out:(R=new b.BezierEasing(0,0,.58,1),function(t){return R.get(t)}),InOut:(B=new b.BezierEasing(.42,0,.58,1),function(t){return B.get(t)}),Bezier:function(t,e,i,s){var n=new b.BezierEasing(t,e,i,s);return function(t){return n.get(t)}}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-F.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*F.Bounce.In(2*t):.5*F.Bounce.Out(2*t-1)+.5}}};function z(t){b.Eventer.call(this),this.element=t.element||{},this.duration=t.duration||300,this.living=!0,this.resident=t.resident||!1,this.infinite=t.infinite||!1,this.alternate=t.alternate||!1,this.repeats=t.repeats||0,this.delay=t.delay||0,this.wait=t.wait||0,this.timeScale=b.Tools.isNumber(t.timeScale)?t.timeScale:1,t.onComplete&&this.on("complete",t.onComplete.bind(this)),t.onUpdate&&this.on("update",t.onUpdate.bind(this)),this.init(),this.paused=!1}function X(t){for(var e in z.call(this,t),t.from=t.from||{},t.to)b.Tools.isUndefined(t.from[e])&&(t.from[e]=this.element[e]);this.ease=t.ease||F.Ease.InOut,this.from=t.from,this.to=t.to}function G(t){z.call(this,t),this.dynamicProperties=[],this._mdf=!1,this.keyframes=b.Tools.copyJSON(t.keyframes),this.frameRate=t.frameRate||30,this.tpf=1e3/this.frameRate,this.ip=b.Tools.isUndefined(t.ip)?this.keyframes.ip:t.ip,this.op=b.Tools.isUndefined(t.ip)?this.keyframes.op:t.op,this.tfs=this.op-this.ip,this.duration=this.tfs*this.tpf,this.ignoreProps=b.Tools.isArray(t.ignoreProps)?t.ignoreProps:[],this.transform=new b.TransformFrames(this,this.keyframes.ks)}function W(t,e){z.call(this,e),this.runners=[],this.queues=[],this.cursor=0,this.total=0,this.alternate=!1,t&&this.then(t)}(z.prototype=Object.create(b.Eventer.prototype)).update=function(t){var e=this.direction*this.timeScale*t;if(0<this.waitCut)this.waitCut-=Math.abs(e);else{if(!(this.paused||!this.living||0<this.delayCut)){this.progress+=e;var i,s=!1,n=this.progress;return this.spill()&&(0<this.repeatsCut||this.infinite?(0<this.repeatsCut&&--this.repeatsCut,this.delayCut=this.delay,this.alternate?(this.direction*=-1,this.progress=b.Tools.codomainBounce(this.progress,0,this.duration)):(this.direction=1,this.progress=b.Tools.euclideanModulo(this.progress,this.duration))):s=!0),s?(this.resident||(this.living=!1),this.progress=b.Tools.clamp(n,0,this.duration),i=this.nextPose(),this.emit("complete",i,n-this.progress)):(i=this.nextPose(),this.emit("update",i,this.progress/this.duration)),i}0<this.delayCut&&(this.delayCut-=Math.abs(e))}},z.prototype.spill=function(){var t=this.progress<=0&&-1===this.direction,e=this.progress>=this.duration&&1===this.direction;return t||e},z.prototype.init=function(){this.direction=1,this.progress=0,this.repeatsCut=this.repeats,this.delayCut=this.delay,this.waitCut=this.wait},z.prototype.nextPose=function(){console.warn("should be overwrite")},z.prototype.linear=function(t,e,i){return(e-t)*i+t},z.prototype.setSpeed=function(t){return this.timeScale=t,this},z.prototype.pause=function(){return this.paused=!0,this},z.prototype.restart=z.prototype.resume=function(){return this.paused=!1,this},z.prototype.stop=function(){return this.repeats=0,this.infinite=!1,this.progress=this.duration,this},z.prototype.cancel=function(){return this.living=!1,this},(X.prototype=Object.create(z.prototype)).nextPose=function(){var t={},e=this.ease(this.progress/this.duration);for(var i in this.to)void 0!==this.element[i]&&(this.element[i]=t[i]=this.linear(this.from[i],this.to[i],e));return t},(G.prototype=Object.create(z.prototype)).prepareProperties=function(t){var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)this.dynamicProperties[e].getValue(t),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},G.prototype.addDynamicProperty=function(t){-1===this.dynamicProperties.indexOf(t)&&this.dynamicProperties.push(t)},G.prototype.nextPose=function(){var t={},e=this.ip+this.progress/this.tpf;return this.prepareProperties(e),-1===this.ignoreProps.indexOf("position")&&(-1===this.ignoreProps.indexOf("x")&&(t.x=this.element.x=this.transform.x),-1===this.ignoreProps.indexOf("y")&&(t.y=this.element.y=this.transform.y)),-1===this.ignoreProps.indexOf("pivot")&&(t.pivot={},-1===this.ignoreProps.indexOf("pivotX")&&(t.pivot.x=this.element.pivot.x=this.transform.anchorX),-1===this.ignoreProps.indexOf("pivotY")&&(t.pivot.y=this.element.pivot.y=this.transform.anchorY)),-1===this.ignoreProps.indexOf("scale")&&(t.scale={},-1===this.ignoreProps.indexOf("scaleX")&&(t.scale.x=this.element.scale.x=this.transform.scaleX),-1===this.ignoreProps.indexOf("scaleY")&&(t.scale.y=this.element.scale.y=this.transform.scaleY)),-1===this.ignoreProps.indexOf("rotation")&&(t.rotation=this.element.rotation=this.transform.rotation),-1===this.ignoreProps.indexOf("alpha")&&(t.alpha=this.element.alpha=this.transform.alpha),t},(W.prototype=Object.create(z.prototype)).then=function(t){return this.queues.push(t),this.total=this.queues.length,this},W.prototype.nextOne=function(t,e){this.runners[this.cursor].init(),this.cursor++,this._residueTime=Math.abs(e)},W.prototype.initOne=function(){var t=this.queues[this.cursor];t.infinite=!1,t.resident=!0,t.element=this.element;var e=null;t.keyframes?e=new G(t):t.to&&(e=new X(t)),null!==e&&(e.on("complete",this.nextOne.bind(this)),this.runners.push(e))},W.prototype.nextPose=function(t){return!this.runners[this.cursor]&&this.queues[this.cursor]&&this.initOne(),0<this._residueTime&&(t+=this._residueTime,this._residueTime=0),this.runners[this.cursor].update(t)},W.prototype.update=function(t){if(0<this.wait)this.wait-=Math.abs(t);else{if(!(this.paused||!this.living||0<this.delayCut)){var e=this.cursor,i=this.nextPose(this.timeScale*t);return this.emit("update",{index:e,pose:i},this.progress/this.duration),this.spill()&&(0<this.repeats||this.infinite?(0<this.repeats&&--this.repeats,this.delayCut=this.delay,this.cursor=0):(this.resident||(this.living=!1),this.emit("complete",i))),i}0<this.delayCut&&(this.delayCut-=Math.abs(t))}},W.prototype.spill=function(){return this.cursor>=this.total};var U={settings:k.settings,UPDATE_PRIORITY:k.UPDATE_PRIORITY,animationTicker:k.ticker.shared};function N(t){this.element=t,this.animates=[],this.timeScale=1,this.paused=!1,this.updateDeltaTime=this.updateDeltaTime.bind(this),U.animationTicker.add(this.updateDeltaTime,U.UPDATE_PRIORITY.HIGH)}N.prototype.clearAnimators=function(t){if(!this.paused)for(var e=this.animates,i=0;i<t.length;i++){var s=t[i];e[s].living||e[s].resident||this.animates.splice(s,1)}},N.prototype.updateDeltaTime=function(t){if(!(this.animates.length<=0)){var e=t/U.settings.TARGET_FPMS;this.update(e)}},N.prototype.update=function(t){if(!(this.paused||this.animates.length<=0)){t=this.timeScale*t;for(var e=[],i=0;i<this.animates.length;i++)this.animates[i].living||this.animates[i].resident?this.animates[i].update(t):e.push(i);0<e.length&&this.clearAnimators(e)}},N.prototype.animate=function(t,e){return t.element=this.element,this._addMove(new X(t),e)},N.prototype.queues=function(t,e,i){return e.element=this.element,this._addMove(new W(t,e),i)},N.prototype.bodymovin=function(t,e){return t.element=this.element,this._addMove(new G(t),e)},N.prototype._addMove=function(t,e){return e&&this.clearAll(),this.animates.push(t),t},N.prototype.pause=function(){this.paused=!0},N.prototype.restart=N.prototype.resume=function(){this.paused=!1},N.prototype.setSpeed=function(t){this.timeScale=t},N.prototype.clearAll=function(){this.animates.length=0},k.DisplayObject.prototype.setupAnimations=function(){this.animations||(this.animations=new N(this))},k.DisplayObject.prototype.animate=function(t,e){return this.animations||this.setupAnimations(),this.animations.animate(t,e)},k.DisplayObject.prototype.queues=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length?arguments[2]:void 0;return this.animations||this.setupAnimations(),this.animations.queues(t,e,i)},k.DisplayObject.prototype.bodymovin=function(t,e){return this.animations||this.setupAnimations(),this.animations.bodymovin(t,e)},Object.defineProperties(k.DisplayObject.prototype,{scaleXY:{get:function(){return this.scale.x},set:function(t){this.scale.set(t)}},scaleX:{get:function(){return this.scale.x},set:function(t){this.scale.x=t}},scaleY:{get:function(){return this.scale.y},set:function(t){this.scale.y=t}},pivotX:{get:function(){return this.pivot.x},set:function(t){this.pivot.x=t}},pivotY:{get:function(){return this.pivot.y},set:function(t){this.pivot.y=t}}}),k.Container.prototype.updateTransform=function(){this.emit("pretransform"),this._boundsID++,this.hierarchy&&this.hierarchy.transform?(this.hierarchy.updateTransform(),this.transform.updateTransform(this.hierarchy.transform)):this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}this.emit("posttransform")},k.Container.prototype.containerUpdateTransform=k.Container.prototype.updateTransform;var q=function(t){function g(t){var e;T(this,g),(e=P(this,w(g).call(this))).animate=null,t.keyframes&&t.useAESize&&(t.width!==t.keyframes.w||t.height!==t.keyframes.h)&&(t.width=t.keyframes.w,t.height=t.keyframes.h);var i=t.view,s=t.width,n=t.height,r=t.transparent,a=t.antialias,o=t.preserveDrawingBuffer,h=t.resolution,l=t.forceCanvas,u=t.backgroundColor,p=t.clearBeforeRender,c=t.roundPixels,f=t.forceFXAA,d=t.legacy,y=t.powerPreference,m=t.sharedTicker,v=t.sharedLoader;return e.app=new k.Application({view:i,width:s,height:n,transparent:r,antialias:a,preserveDrawingBuffer:o,resolution:h,forceCanvas:l,backgroundColor:u,clearBeforeRender:p,roundPixels:c,forceFXAA:f,legacy:d,powerPreference:y,sharedTicker:m,sharedLoader:v}),e.manager=new b.AnimationManager(e.app),e.loaded=!1,e.parseData(t),e}return h(g,b.Eventer),o(g,[{key:"resizeWithAESize",value:function(){var t=this.app.renderer,e=t.width,i=t.height;e===this.animate.keyframes.w&&i===this.animate.keyframes.h||this.app.renderer.resize(this.animate.keyframes.w,this.animate.keyframes.h)}},{key:"parseData",value:function(t){var e=this;this.animate=this.manager.parseAnimation(t),this.animate.isDisplayLoaded?(t.useAESize&&this.resizeWithAESize(),this.app.stage.addChild(this.animate.group)):this.animate.once("DisplayReady",function(){t.useAESize&&e.resizeWithAESize(),e.app.stage.addChild(e.animate.group),e.emit("DisplayReady",e)}),this.animate.isImagesLoaded?this.loaded=!0:(this.animate.once("success",function(){e.loaded=!0,e.emit("success",e)}),this.animate.once("error",function(t){e.emit("error",t)}))}}]),g}();Object.defineProperty(t,"AnimationGroup",{enumerable:!0,get:function(){return b.AnimationGroup}}),Object.defineProperty(t,"AnimationManager",{enumerable:!0,get:function(){return b.AnimationManager}}),Object.defineProperty(t,"BezierEasing",{enumerable:!0,get:function(){return b.BezierEasing}}),Object.defineProperty(t,"DisplayRegister",{enumerable:!0,get:function(){return b.DisplayRegister}}),Object.defineProperty(t,"Eventer",{enumerable:!0,get:function(){return b.Eventer}}),Object.defineProperty(t,"LoaderRegister",{enumerable:!0,get:function(){return b.LoaderRegister}}),Object.defineProperty(t,"PropertyFactory",{enumerable:!0,get:function(){return b.PropertyFactory}}),Object.defineProperty(t,"Tools",{enumerable:!0,get:function(){return b.Tools}}),Object.defineProperty(t,"TransformFrames",{enumerable:!0,get:function(){return b.TransformFrames}}),Object.defineProperty(t,"TransformProperty",{enumerable:!0,get:function(){return b.TransformProperty}}),t.Tween=F,t.loadAnimation=function(t){return t.container&&!t.view&&(t.view=t.container),t.animationData&&!t.keyframes&&(t.keyframes=t.animationData),t.assetsPath&&!t.prefix&&(t.prefix=t.assetsPath.replace(/images\/?$/,"")),t.initialSegment&&!t.initSegment&&(t.initSegment=t.initialSegment),b.Tools.isBoolean(t.autoplay)&&!b.Tools.isBoolean(t.autoStart)&&(t.autoStart=t.autoplay),b.Tools.isBoolean(t.loop)&&!b.Tools.isBoolean(t.infinite)&&(t.infinite=t.loop),t.view=b.Tools.isString(t.view)?document.querySelector(t.view):t.view,t.useAESize=!b.Tools.isBoolean(t.useAESize)||t.useAESize,new q(t)},t.useTicker=function(t){U.animationTicker=t},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
