!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).LOTTIE=t.LOTTIE||{})}(this,function(t){"use strict";function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function p(t,e,s){return e&&i(t.prototype,e),s&&i(t,s),t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?m(t):e}function e(t){return Object.prototype.toString.call(t)}var a,r,n,h,o,u,k={copyJSON:function(t){return JSON.parse(JSON.stringify(t))},isArray:(u=e([]),function(t){return e(t)===u}),isString:(o=e("s"),function(t){return e(t)===o}),isNumber:(h=e(1),function(t){return e(t)===h}),isFunction:(n=e(function(){}),function(t){return e(t)===n}),isUndefined:function(t){return void 0===t},isBoolean:(r=e(!0),function(t){return e(t)===r}),isObject:(a=e({}),function(t){return e(t)===a}),random:function(t,e){return this.isArray(t)?t[~~(Math.random()*t.length)]:(this.isNumber(e)||(e=t||1,t=0),t+Math.random()*(e-t))},euclideanModulo:function(t,e){return(t%e+e)%e},codomainBounce:function(t,e,s){return t<e?2*e-t:s<t?2*s-t:t},clamp:function(t,e,s){return t<e?e:s<t?s:t},inRange:function(t,e,s){return e<=t&&t<=s},getAssets:function(t,e){for(var s=0;s<e.length;s++)if(t===e[s].id)return e[s];return console.error("have not assets name as",t),{}},rgb2hex:function(t){return(t[0]<<16)+(t[1]<<8)+(0|t[2])}},f=function(){function t(){c(this,t),this.listeners={},this.addEventListener=this.on,this.removeEventListener=this.off}return p(t,[{key:"on",value:function(t,e){return k.isFunction(e)&&(k.isUndefined(this.listeners[t])&&(this.listeners[t]=[]),this.listeners[t].push(e)),this}},{key:"off",value:function(t,e){if(k.isUndefined(this.listeners[t]))return this;var s=this.listeners[t],i=s.length;if(0<i)if(e)for(;i--;)s[i]===e&&s.splice(i,1);else s.length=0;return this}},{key:"once",value:function(s,i){var a=this;if(!k.isFunction(i))return this;return this.on(s,function t(e){i(e),a.off(s,t)}),this}},{key:"emit",value:function(t){if(k.isUndefined(this.listeners[t]))return this;for(var e=(this.listeners[t]||[]).slice(0),s=arguments.length,i=new Array(1<s?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];for(var r=0;r<e.length;r++)e[r].apply(this,i);return this}}]),t}(),g={},_={Ajax:"Ajax",Texture:"Texture"};var y={Type:_,registerLoaderByType:function(t,e){g[t]=e}};function S(t,e,s){var i,a,r,n,h,o,p=t.length;for(a=0;a<p;a+=1)if("ks"in(i=t[a])&&!i.completed){if(i.completed=!0,i.tt&&(t[a-1].td=i.tt),i.hasMask){var l=i.masksProperties;for(n=l.length,r=0;r<n;r+=1)if(l[r].pt.k.i)T(l[r].pt.k);else for(o=l[r].pt.k.length,h=0;h<o;h+=1)l[r].pt.k[h].s&&T(l[r].pt.k[h].s[0]),l[r].pt.k[h].e&&T(l[r].pt.k[h].e[0])}0===i.ty?(i.layers=M(i.refId,e),S(i.layers,e)):4===i.ty?P(i.shapes):5==i.ty&&F(i)}}function M(t,e){for(var s=0,i=e.length;s<i;){if(e[s].id===t)return e[s].layers.__used?JSON.parse(JSON.stringify(e[s].layers)):(e[s].layers.__used=!0,e[s].layers);s+=1}}function P(t){var e,s,i;for(e=t.length-1;0<=e;e-=1)if("sh"==t[e].ty)if(t[e].ks.k.i)T(t[e].ks.k);else for(i=t[e].ks.k.length,s=0;s<i;s+=1)t[e].ks.k[s].s&&T(t[e].ks.k[s].s[0]),t[e].ks.k[s].e&&T(t[e].ks.k[s].e[0]);else"gr"==t[e].ty&&P(t[e].it)}function T(t){var e,s=t.i.length;for(e=0;e<s;e+=1)t.i[e][0]+=t.v[e][0],t.i[e][1]+=t.v[e][1],t.o[e][0]+=t.v[e][0],t.o[e][1]+=t.v[e][1]}function x(t,e){var s=e?e.split("."):[100,100,100];return t[0]>s[0]||!(s[0]>t[0])&&(t[1]>s[1]||!(s[1]>t[1])&&(t[2]>s[2]||!(s[2]>t[2])&&void 0))}var w,D=function(){var i=[4,4,14];function a(t){var e,s,i,a=t.length;for(e=0;e<a;e+=1)5===t[e].ty&&(s=t[e],void 0,i=s.t.d,s.t.d={k:[{s:i,t:0}]})}return function(t){if(x(i,t.v)&&(a(t.layers),t.assets)){var e,s=t.assets.length;for(e=0;e<s;e+=1)t.assets[e].layers&&a(t.assets[e].layers)}}}(),L=(w=[4,7,99],function(t){if(t.chars&&!x(w,t.v)){var e,s,i,a,r,n=t.chars.length;for(e=0;e<n;e+=1)if(t.chars[e].data&&t.chars[e].data.shapes)for(i=(r=t.chars[e].data.shapes[0].it).length,s=0;s<i;s+=1)(a=r[s].ks.k).__converted||(T(r[s].ks.k),a.__converted=!0)}}),b=function(){var i=[4,1,9];function r(t){var e,s,i,a=t.length;for(e=0;e<a;e+=1)if("gr"===t[e].ty)r(t[e].it);else if("fl"===t[e].ty||"st"===t[e].ty)if(t[e].c.k&&t[e].c.k[0].i)for(i=t[e].c.k.length,s=0;s<i;s+=1)t[e].c.k[s].s&&(t[e].c.k[s].s[0]/=255,t[e].c.k[s].s[1]/=255,t[e].c.k[s].s[2]/=255,t[e].c.k[s].s[3]/=255),t[e].c.k[s].e&&(t[e].c.k[s].e[0]/=255,t[e].c.k[s].e[1]/=255,t[e].c.k[s].e[2]/=255,t[e].c.k[s].e[3]/=255);else t[e].c.k[0]/=255,t[e].c.k[1]/=255,t[e].c.k[2]/=255,t[e].c.k[3]/=255}function a(t){var e,s=t.length;for(e=0;e<s;e+=1)4===t[e].ty&&r(t[e].shapes)}return function(t){if(x(i,t.v)&&(a(t.layers),t.assets)){var e,s=t.assets.length;for(e=0;e<s;e+=1)t.assets[e].layers&&a(t.assets[e].layers)}}}(),A=function(){var i=[4,4,18];function p(t){var e,s,i;for(e=t.length-1;0<=e;e-=1)if("sh"==t[e].ty)if(t[e].ks.k.i)t[e].ks.k.c=t[e].closed;else for(i=t[e].ks.k.length,s=0;s<i;s+=1)t[e].ks.k[s].s&&(t[e].ks.k[s].s[0].c=t[e].closed),t[e].ks.k[s].e&&(t[e].ks.k[s].e[0].c=t[e].closed);else"gr"==t[e].ty&&p(t[e].it)}function a(t){var e,s,i,a,r,n,h=t.length;for(s=0;s<h;s+=1){if((e=t[s]).hasMask){var o=e.masksProperties;for(a=o.length,i=0;i<a;i+=1)if(o[i].pt.k.i)o[i].pt.k.c=o[i].cl;else for(n=o[i].pt.k.length,r=0;r<n;r+=1)o[i].pt.k[r].s&&(o[i].pt.k[r].s[0].c=o[i].cl),o[i].pt.k[r].e&&(o[i].pt.k[r].e[0].c=o[i].cl)}4===e.ty&&p(e.shapes)}}return function(t){if(x(i,t.v)&&(a(t.layers),t.assets)){var e,s=t.assets.length;for(e=0;e<s;e+=1)t.assets[e].layers&&a(t.assets[e].layers)}}}();function F(t,e){0!==t.t.a.length||"m"in t.t.p||(t.singleShape=!0)}var C={completeData:function(t,e){t.__complete||(b(t),D(t),L(t),A(t),S(t.layers,t.assets),t.__complete=!0)},checkColors:b,checkChars:L,checkShapes:A,completeLayers:S},I=11,E=1/(I-1),V="function"==typeof Float32Array;function N(t,e){return 1-3*e+3*t}function q(t,e){return 3*e-6*t}function O(t){return 3*t}function X(t,e,s){return((N(e,s)*t+q(e,s))*t+O(e))*t}function j(t,e,s){return 3*N(e,s)*t*t+2*q(e,s)*t+O(e)}function Y(t,e,s,i){if(!(0<=t&&t<=1&&0<=s&&s<=1))throw new Error("bezier x values must be in [0, 1] range");this.mX1=t,this.mY1=e,this.mX2=s,this.mY2=i,this.sampleValues=V?new Float32Array(I):new Array(I),this._preCompute(),this.get=this.get.bind(this)}Y.prototype._preCompute=function(){if(this.mX1!==this.mY1||this.mX2!==this.mY2)for(var t=0;t<I;++t)this.sampleValues[t]=X(t*E,this.mX1,this.mX2)},Y.prototype._getTForX=function(t){for(var e=0,s=1,i=I-1;s!==i&&this.sampleValues[s]<=t;++s)e+=E;--s;var a=e+(t-this.sampleValues[s])/(this.sampleValues[s+1]-this.sampleValues[s])*E,r=j(a,this.mX1,this.mX2);return.001<=r?function(t,e,s,i){for(var a=0;a<4;++a){var r=j(e,s,i);if(0===r)return e;e-=(X(e,s,i)-t)/r}return e}(t,a,this.mX1,this.mX2):0===r?a:function(t,e,s,i,a){for(var r,n,h=0;0<(r=X(n=e+(s-e)/2,i,a)-t)?s=n:e=n,1e-7<Math.abs(r)&&++h<10;);return n}(t,e,e+E,this.mX1,this.mX2)},Y.prototype.get=function(t){return this.mX1===this.mY1&&this.mX2===this.mY2?t:0===t?0:1===t?1:X(this._getTForX(t),this.mY1,this.mY2)};var z={};var st,it={getBezierEasing:function(t,e,s,i,a){var r=a||("bez_"+t+"_"+e+"_"+s+"_"+i).replace(/\./g,"p");if(z[r])return z[r];var n=new Y(t,e,s,i);return z[r]=n}};function B(t){return new Array(t)}st="function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(t,e){return"float32"===t?new Float32Array(e):"int16"===t?new Int16Array(e):"uint8c"===t?new Uint8ClampedArray(e):void 0}:function(t,e){var s,i=0,a=[];switch(t){case"int16":case"uint8c":s=1;break;default:s=1.1}for(i=0;i<e;i+=1)a.push(s);return a};var R={double:function(t){return t.concat(B(t.length))}},G=function(t,e,s){var i=0,a=t,r=B(a);return{newElement:function(){var t;t=i?r[i-=1]:e();return t},release:function(t){i===a&&(r=R.double(r),a*=2);s&&s(t);r[i]=t,i+=1}}};var K=G(8,function(){return st("float32",2)}),J=function(){function o(){c(this,o),this.c=!1,this._length=0,this._maxLength=8,this.v=B(this._maxLength),this.o=B(this._maxLength),this.i=B(this._maxLength)}return p(o,[{key:"setPathData",value:function(t,e){this.c=t,this.setLength(e);for(var s=0;s<e;)this.v[s]=K.newElement(),this.o[s]=K.newElement(),this.i[s]=K.newElement(),s+=1}},{key:"setLength",value:function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t}},{key:"doubleArrayLength",value:function(){this.v=this.v.concat(B(this._maxLength)),this.i=this.i.concat(B(this._maxLength)),this.o=this.o.concat(B(this._maxLength)),this._maxLength*=2}},{key:"setXYAt",value:function(t,e,s,i,a){var r;switch(this._length=Math.max(this._length,i+1),this._length>=this._maxLength&&this.doubleArrayLength(),s){case"v":r=this.v;break;case"i":r=this.i;break;case"o":r=this.o}(!r[i]||r[i]&&!a)&&(r[i]=K.newElement()),r[i][0]=t,r[i][1]=e}},{key:"setTripleAt",value:function(t,e,s,i,a,r,n,h){this.setXYAt(t,e,"v",n,h),this.setXYAt(s,i,"o",n,h),this.setXYAt(a,r,"i",n,h)}},{key:"reverse",value:function(){var t=new o;t.setPathData(this.c,this._length);var e=this.v,s=this.o,i=this.i,a=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],i[0][0],i[0][1],s[0][0],s[0][1],0,!1),a=1);for(var r=this._length-1,n=this._length,h=a;h<n;h+=1)t.setTripleAt(e[r][0],e[r][1],i[r][0],i[r][1],s[r][0],s[r][1],h,!1),r-=1;return t}}]),o}();var H=G(4,function(){return new J},function(t){for(var e=t._length,s=0;s<e;s+=1)K.release(t.v[s]),K.release(t.i[s]),K.release(t.o[s]),t.v[s]=null,t.i[s]=null,t.o[s]=null;t._length=0,t.c=!1});H.clone=function(t){var e=H.newElement(),s=void 0===t._length?t.v.length:t._length;e.setLength(s),e.c=t.c;for(var i=0;i<s;i+=1)e.setTripleAt(t.v[i][0],t.v[i][1],t.o[i][0],t.o[i][1],t.i[i][0],t.i[i][1],i);return e};var U=function(){function t(){c(this,t),this._length=0,this._maxLength=4,this.shapes=B(this._maxLength)}return p(t,[{key:"addShape",value:function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(B(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1}},{key:"releaseShapes",value:function(){for(var t=0;t<this._length;t+=1)H.release(this.shapes[t]);this._length=0}}]),t}(),Z=0,Q=4,W=B(Q);var $={newShapeCollection:function(){return Z?W[Z-=1]:new U},release:function(t){for(var e=t._length,s=0;s<e;s+=1)H.release(t.shapes[s]);t._length=0,Z===Q&&(W=R.double(W),Q*=2),W[Z]=t,Z+=1}},tt=function(){function t(){c(this,t)}return p(t,[{key:"outTypeExpressionMode",value:function(){this._hasOutTypeExpression=!0,this.container&&this.container.outTypeExpressionMode()}},{key:"addDynamicProperty",value:function(t){-1===this.dynamicProperties.indexOf(t)&&(this.dynamicProperties.push(t),this.container.addDynamicProperty(this),this._isAnimated=!0,t._hasOutTypeExpression&&this.outTypeExpressionMode())}},{key:"iterateDynamicProperties",value:function(t){this._mdf=!1;for(var e=this.dynamicProperties.length,s=0;s<e;s+=1)this.dynamicProperties[s].getValue(t),this.dynamicProperties[s]._mdf&&(this._mdf=!0)}},{key:"initDynamicPropertyContainer",value:function(t){this.container=t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1,this._hasOutTypeExpression=!1}}]),t}();var et=G(8,function(){return{addedLength:0,percents:st("float32",200),lengths:st("float32",200)}});var at=G(8,function(){return{lengths:[],totalLength:0}},function(t){for(var e=t.lengths.length,s=0;s<e;s+=1)et.release(t.lengths[s]);t.lengths.length=0}),rt=200;function nt(t,e,s,i,a,r){var n=t*i+e*a+s*r-a*i-r*t-s*e;return-.001<n&&n<.001}function ht(t,e,s,i){for(var a,r=rt,n=0,h=[],o=[],p=et.newElement(),l=s.length,u=0;u<r;u+=1){for(var f=u/(r-1),c=a=0;c<l;c+=1){var d=Math.pow(1-f,3)*t[c]+3*Math.pow(1-f,2)*f*s[c]+3*(1-f)*Math.pow(f,2)*i[c]+Math.pow(f,3)*e[c];h[c]=d,null!==o[c]&&(a+=Math.pow(h[c]-o[c],2)),o[c]=h[c]}a&&(n+=a=Math.sqrt(a)),p.percents[u]=f,p.lengths[u]=n}return p.addedLength=n,p}function ot(t){this.segmentLength=0,this.points=new Array(t)}function pt(t,e){this.partialLength=t,this.point=e}var lt={};function ut(t,e){var s=e.percents,i=e.lengths,a=s.length,r=Math.floor((a-1)*t),n=t*e.addedLength,h=0;if(r===a-1||0===r||n===i[r])return s[r];for(var o=i[r]>n?-1:1,p=!0;p;)if(i[r]<=n&&i[r+1]>n?(h=(n-i[r])/(i[r+1]-i[r]),p=!1):r+=o,r<0||a-1<=r){if(r===a-1)return s[r];p=!1}return s[r]+(s[r+1]-s[r])*h}var ft=st("float32",8);var ct={getSegmentsLength:function(t){for(var e=at.newElement(),s=t.c,i=t.v,a=t.o,r=t.i,n=t._length,h=e.lengths,o=0,p=0;p<n-1;p+=1)h[p]=ht(i[p],i[p+1],a[p],r[p+1]),o+=h[p].addedLength;return s&&n&&(h[p]=ht(i[p],i[0],a[p],r[0]),o+=h[p].addedLength),e.totalLength=o,e},getNewSegment:function(t,e,s,i,a,r,n){for(var h=ut(a=a<0?0:1<a?1:a,n),o=ut(r=1<r?1:r,n),p=t.length,l=1-h,u=1-o,f=l*l*l,c=h*l*l*3,d=h*h*l*3,m=h*h*h,v=l*l*u,y=h*l*u+l*h*u+l*l*o,g=h*h*u+l*h*o+h*l*o,k=h*h*o,_=l*u*u,S=h*u*u+l*o*u+l*u*o,M=h*o*u+l*o*o+h*u*o,P=h*o*o,T=u*u*u,x=o*u*u+u*o*u+u*u*o,w=o*o*u+u*o*o+o*u*o,D=o*o*o,L=0;L<p;L+=1)ft[4*L]=Math.round(1e3*(f*t[L]+c*s[L]+d*i[L]+m*e[L]))/1e3,ft[4*L+1]=Math.round(1e3*(v*t[L]+y*s[L]+g*i[L]+k*e[L]))/1e3,ft[4*L+2]=Math.round(1e3*(_*t[L]+S*s[L]+M*i[L]+P*e[L]))/1e3,ft[4*L+3]=Math.round(1e3*(T*t[L]+x*s[L]+w*i[L]+D*e[L]))/1e3;return ft},getPointInSegment:function(t,e,s,i,a,r){var n=ut(a,r),h=1-n;return[Math.round(1e3*(h*h*h*t[0]+(n*h*h+h*n*h+h*h*n)*s[0]+(n*n*h+h*n*n+n*h*n)*i[0]+n*n*n*e[0]))/1e3,Math.round(1e3*(h*h*h*t[1]+(n*h*h+h*n*h+h*h*n)*s[1]+(n*n*h+h*n*n+n*h*n)*i[1]+n*n*n*e[1]))/1e3]},buildBezierData:function(t,e,s,i){var a=(t[0]+"_"+t[1]+"_"+e[0]+"_"+e[1]+"_"+s[0]+"_"+s[1]+"_"+i[0]+"_"+i[1]).replace(/\./g,"p");if(!lt[a]){var r,n,h=rt,o=0,p=null;2===t.length&&(t[0]!=e[0]||t[1]!=e[1])&&nt(t[0],t[1],e[0],e[1],t[0]+s[0],t[1]+s[1])&&nt(t[0],t[1],e[0],e[1],e[0]+i[0],e[1]+i[1])&&(h=2);for(var l=new ot(h),u=s.length,f=0;f<h;f+=1){n=B(u);for(var c=f/(h-1),d=r=0;d<u;d+=1){var m=Math.pow(1-c,3)*t[d]+3*Math.pow(1-c,2)*c*(t[d]+s[d])+3*(1-c)*Math.pow(c,2)*(e[d]+i[d])+Math.pow(c,3)*e[d];n[d]=m,null!==p&&(r+=Math.pow(n[d]-p[d],2))}o+=r=Math.sqrt(r),l.points[f]=new pt(r,n),p=n}l.segmentLength=o,lt[a]=l}return lt[a]},pointOnLine2D:nt,pointOnLine3D:function(t,e,s,i,a,r,n,h,o){if(0===s&&0===r&&0===o)return nt(t,e,i,a,n,h);var p,l=Math.sqrt(Math.pow(i-t,2)+Math.pow(a-e,2)+Math.pow(r-s,2)),u=Math.sqrt(Math.pow(n-t,2)+Math.pow(h-e,2)+Math.pow(o-s,2)),f=Math.sqrt(Math.pow(n-i,2)+Math.pow(h-a,2)+Math.pow(o-r,2));return-1e-4<(p=u<l?f<l?l-u-f:f-u-l:u<f?f-u-l:u-l-f)&&p<1e-4}},dt=-999999,mt=Math.PI/180,vt=[0,0],yt=/(loopIn|loopOut)\(([^)]+)/,gt=/["']\w+["']/,kt=function(){function i(t,e,s){c(this,i),this.begin=e,this.end=s,this.total=this.end-this.begin,this.type=t}return p(i,[{key:"update",value:function(t){return"in"===this.type?t>=this.begin?t:this.end-k.euclideanModulo(this.begin-t,this.total):"out"===this.type?t<=this.end?t:this.begin+k.euclideanModulo(t-this.end,this.total):void 0}}]),i}(),_t=function(){function i(t,e,s){c(this,i),this.begin=e,this.end=s,this.total=this.end-this.begin,this.type=t}return p(i,[{key:"update",value:function(t){if("in"===this.type&&t<this.begin||"out"===this.type&&t>this.end){var e=t-this.end;return this.pingpong(e)}return t}},{key:"pingpong",value:function(t){return Math.floor(t/this.total)%2?this.begin+k.euclideanModulo(t,this.total):this.end-k.euclideanModulo(t,this.total)}}]),i}(),St={loopIn:function(t,e,s){var i=t[0].t,a=t.length-1,r=t[Math.min(a,s)].t;switch(e){case"cycle":return new kt("in",i,r);case"pingpong":return new _t("in",i,r)}return null},loopOut:function(t,e,s){var i=t.length-1,a=t[Math.max(0,i-s)].t,r=t[i].t;switch(e){case"cycle":return new kt("out",a,r);case"pingpong":return new _t("out",a,r)}return null}};function Mt(t){var e=t.match(yt),s=e[2].split(/\s*,\s*/).map(function(t){return gt.test(t)?t.replace(/"|'/g,""):parseInt(t)});return{name:e[1],mode:s[0],offset:s[1]}}var Pt={hasSupportExpression:function(t){return t.x&&yt.test(t.x)},getExpression:function(t){var e=Mt(t.x),s=e.name,i=e.mode,a=e.offset,r=void 0===a?0:a,n=0===r?t.k.length-1:r;return St[s]&&St[s](t.k,i,n)}};function Tt(t){var e=t[0]*mt,s=t[1]*mt,i=t[2]*mt,a=Math.cos(e/2),r=Math.cos(s/2),n=Math.cos(i/2),h=Math.sin(e/2),o=Math.sin(s/2),p=Math.sin(i/2);return[h*o*n+a*r*p,h*r*n+a*o*p,a*o*n-h*r*p,a*r*n-h*o*p]}var xt=function(){function t(){c(this,t)}return p(t,[{key:"interpolateValue",value:function(t,e){var s;"multidimensional"===this.propType&&(s=st("float32",this.pv.length));for(var i,a,r,n,h,o,p,l,u=e.lastIndex,f=u,c=this.keyframes.length-1,d=!0;d;){if(i=this.keyframes[f],a=this.keyframes[f+1],f===c-1&&t>=a.t){i.h&&(i=a),u=0;break}if(a.t>t){u=f;break}f<c-1?f+=1:(u=0,d=!1)}var m,v,y,g,k,_,S,M,P,T,x,w,D,L,b,A,F,C,I,E,V,N,q,O,X,j,Y,z=a.t,B=i.t;if(i.to){i.bezierData||(i.bezierData=ct.buildBezierData(i.s,a.s||i.e,i.to,i.ti));var R=i.bezierData;if(z<=t||t<B){var G=z<=t?R.points.length-1:0;for(n=R.points[G].point.length,r=0;r<n;r+=1)s[r]=R.points[G].point[r]}else{i.__fnct?l=i.__fnct:(l=it.getBezierEasing(i.o.x,i.o.y,i.i.x,i.i.y,i.n).get,i.__fnct=l),h=l((t-B)/(z-B));var K,J=R.segmentLength*h,H=e.lastFrame<t&&e._lastKeyframeIndex===f?e._lastAddedLength:0;for(p=e.lastFrame<t&&e._lastKeyframeIndex===f?e._lastPoint:0,d=!0,o=R.points.length;d;){if(H+=R.points[p].partialLength,0===J||0===h||p===R.points.length-1){for(n=R.points[p].point.length,r=0;r<n;r+=1)s[r]=R.points[p].point[r];break}if(H<=J&&J<H+R.points[p+1].partialLength){for(K=(J-H)/R.points[p+1].partialLength,n=R.points[p].point.length,r=0;r<n;r+=1)s[r]=R.points[p].point[r]+(R.points[p+1].point[r]-R.points[p].point[r])*K;break}p<o-1?p+=1:d=!1}e._lastPoint=p,e._lastAddedLength=H-R.points[p].partialLength,e._lastKeyframeIndex=f}}else{var U,Z,Q,W,$;if(c=i.s.length,m=a.s||i.e,this.sh&&1!==i.h)if(z<=t)s[0]=m[0],s[1]=m[1],s[2]=m[2];else if(t<=B)s[0]=i.s[0],s[1]=i.s[1],s[2]=i.s[2];else{var tt=Tt(i.s),et=Tt(m);v=s,w=et,D=(t-B)/(z-B),I=[],E=(x=tt)[0],V=x[1],N=x[2],q=x[3],O=w[0],X=w[1],j=w[2],Y=w[3],(b=E*O+V*X+N*j+q*Y)<0&&(b=-b,O=-O,X=-X,j=-j,Y=-Y),C=1e-6<1-b?(L=Math.acos(b),A=Math.sin(L),F=Math.sin((1-D)*L)/A,Math.sin(D*L)/A):(F=1-D,D),I[0]=F*E+C*O,I[1]=F*V+C*X,I[2]=F*N+C*j,I[3]=F*q+C*Y,g=(y=I)[0],k=y[1],_=y[2],S=y[3],M=Math.atan2(2*k*S-2*g*_,1-2*k*k-2*_*_),P=Math.asin(2*g*k+2*_*S),T=Math.atan2(2*g*S-2*k*_,1-2*g*g-2*_*_),v[0]=M/mt,v[1]=P/mt,v[2]=T/mt}else for(f=0;f<c;f+=1)1!==i.h&&(h=z<=t?1:t<B?0:(i.o.x.constructor===Array?(i.__fnct||(i.__fnct=[]),i.__fnct[f]?l=i.__fnct[f]:(U=void 0===i.o.x[f]?i.o.x[0]:i.o.x[f],Z=void 0===i.o.y[f]?i.o.y[0]:i.o.y[f],Q=void 0===i.i.x[f]?i.i.x[0]:i.i.x[f],W=void 0===i.i.y[f]?i.i.y[0]:i.i.y[f],l=it.getBezierEasing(U,Z,Q,W).get,i.__fnct[f]=l)):i.__fnct?l=i.__fnct:(U=i.o.x,Z=i.o.y,Q=i.i.x,W=i.i.y,l=it.getBezierEasing(U,Z,Q,W).get,i.__fnct=l),l((t-B)/(z-B)))),m=a.s||i.e,$=1===i.h?i.s[f]:i.s[f]+(m[f]-i.s[f])*h,"multidimensional"===this.propType?s[f]=$:s=$}return e.lastIndex=u,s}},{key:"getValueAtCurrentTime",value:function(t){var e=this.keyframes[0].t,s=this.keyframes[this.keyframes.length-1].t;if(!(t===this._caching.lastFrame||this._caching.lastFrame!==dt&&(this._caching.lastFrame>=s&&s<=t||this._caching.lastFrame<e&&t<e))){this._caching.lastFrame>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var i=this.interpolateValue(t,this._caching);this.pv=i}return this._caching.lastFrame=t,this.pv}},{key:"setVValue",value:function(t){var e;if("unidimensional"===this.propType)e=t*this.mult,1e-5<Math.abs(this.v-e)&&(this.v=e,this._mdf=!0);else for(var s=0,i=this.v.length;s<i;)e=t[s]*this.mult,1e-5<Math.abs(this.v[s]-e)&&(this.v[s]=e,this._mdf=!0),s+=1}},{key:"processEffectsSequence",value:function(t){if(this.expression&&(t=this.expression.update(t)),t!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var e;this.lock=!0,this._mdf=this._isFirstFrame;var s=this.effectsSequence.length,i=this.kf?this.pv:this.data.k;for(e=0;e<s;e+=1)i=this.effectsSequence[e](t);this.setVValue(i),this._isFirstFrame=!1,this.lock=!1,this.frameId=t}}},{key:"addEffect",value:function(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}}]),t}(),wt=function(t){function r(t,e,s,i){var a;return c(this,r),(a=v(this,d(r).call(this))).propType="unidimensional",a.mult=s||1,a.data=e,a.v=s?e.k*s:e.k,a.pv=e.k,a._mdf=!1,a.elem=t,a.container=i,a.k=!1,a.kf=!1,a.vel=0,a.effectsSequence=[],a._isFirstFrame=!0,a.getValue=a.processEffectsSequence,a}return l(r,xt),r}(),Dt=function(t){function h(t,e,s,i){var a;c(this,h),(a=v(this,d(h).call(this))).propType="multidimensional",a.mult=s||1,a.data=e,a._mdf=!1,a.elem=t,a.container=i,a.comp=t.comp,a.k=!1,a.kf=!1,a.frameId=-1;var r=e.k.length;a.v=st("float32",r),a.pv=st("float32",r),a.vel=st("float32",r);for(var n=0;n<r;n+=1)a.v[n]=e.k[n]*a.mult,a.pv[n]=e.k[n];return a._isFirstFrame=!0,a.effectsSequence=[],a.getValue=a.processEffectsSequence,a}return l(h,xt),h}(),Lt=function(t){function r(t,e,s,i){var a;return c(this,r),(a=v(this,d(r).call(this))).propType="unidimensional",a.keyframes=e.k,a.frameId=-1,a._caching={lastFrame:dt,lastIndex:0,value:0,_lastKeyframeIndex:-1},a.k=!0,a.kf=!0,a.data=e,a.mult=s||1,a.elem=t,a.container=i,a.comp=t.comp,a.v=dt,a.pv=dt,a._isFirstFrame=!0,a.getValue=a.processEffectsSequence,a.effectsSequence=[a.getValueAtCurrentTime.bind(m(m(a)))],a._hasOutTypeExpression=!1,Pt.hasSupportExpression(e)&&(a.expression=Pt.getExpression(e),a._hasOutTypeExpression="out"===a.expression.type),a}return l(r,xt),r}(),bt=function(t){function f(t,e,s,i){var a,r;c(this,f),(a=v(this,d(f).call(this))).propType="multidimensional";var n,h,o,p,l=e.k.length;for(r=0;r<l-1;r+=1)e.k[r].to&&e.k[r].s&&e.k[r+1]&&e.k[r+1].s&&(n=e.k[r].s,h=e.k[r+1].s,o=e.k[r].to,p=e.k[r].ti,(2===n.length&&(n[0]!==h[0]||n[1]!==h[1])&&ct.pointOnLine2D(n[0],n[1],h[0],h[1],n[0]+o[0],n[1]+o[1])&&ct.pointOnLine2D(n[0],n[1],h[0],h[1],h[0]+p[0],h[1]+p[1])||3===n.length&&(n[0]!==h[0]||n[1]!==h[1]||n[2]!==h[2])&&ct.pointOnLine3D(n[0],n[1],n[2],h[0],h[1],h[2],n[0]+o[0],n[1]+o[1],n[2]+o[2])&&ct.pointOnLine3D(n[0],n[1],n[2],h[0],h[1],h[2],h[0]+p[0],h[1]+p[1],h[2]+p[2]))&&(e.k[r].to=null,e.k[r].ti=null),n[0]===h[0]&&n[1]===h[1]&&0===o[0]&&0===o[1]&&0===p[0]&&0===p[1]&&(2===n.length||n[2]===h[2]&&0===o[2]&&0===p[2])&&(e.k[r].to=null,e.k[r].ti=null));a.effectsSequence=[a.getValueAtCurrentTime.bind(m(m(a)))],a.keyframes=e.k,a.k=!0,a.kf=!0,a._isFirstFrame=!0,a.mult=s||1,a.elem=t,a.container=i,a.comp=t.comp,a.getValue=a.processEffectsSequence,a.frameId=-1;var u=e.k[0].s.length;for(a.v=st("float32",u),a.pv=st("float32",u),r=0;r<u;r+=1)a.v[r]=dt,a.pv[r]=dt;return a._caching={lastFrame:dt,lastIndex:0,value:st("float32",u)},a._hasOutTypeExpression=!1,Pt.hasSupportExpression(e)&&(a.expression=Pt.getExpression(e),a._hasOutTypeExpression="out"===a.expression.type),a}return l(f,xt),f}();var At={getProp:function(t,e,s,i,a){var r;if(e.k.length)if("number"==typeof e.k[0])r=new Dt(t,e,i,a);else switch(s){case 0:r=new Lt(t,e,i,a);break;case 1:r=new bt(t,e,i,a)}else r=new wt(t,e,i,a);return r.effectsSequence.length&&a.addDynamicProperty(r),r}},Ft=function(){function t(){c(this,t)}return p(t,[{key:"interpolateShape",value:function(t,e,s){var i,a,r,n,h,o,p,l,u,f=s.lastIndex,c=this.keyframes;if(t<c[0].t)i=c[0].s[0],r=!0,f=0;else if(t>=c[c.length-1].t)i=c[c.length-1].s?c[c.length-1].s[0]:c[c.length-2].e[0],r=!0;else{for(var d,m,v=f,y=c.length-1,g=!0;g&&(d=c[v],!((m=c[v+1]).t>t));)v<y-1?v+=1:g=!1;if(f=v,!(r=1===d.h)){if(t>=m.t)l=1;else if(t<d.t)l=0;else{var k;d.__fnct?k=d.__fnct:(k=it.getBezierEasing(d.o.x,d.o.y,d.i.x,d.i.y).get,d.__fnct=k),l=k((t-d.t)/(m.t-d.t))}a=m.s?m.s[0]:d.e[0]}i=d.s[0]}for(o=e._length,p=i.i[0].length,s.lastIndex=f,n=0;n<o;n+=1)for(h=0;h<p;h+=1)u=r?i.i[n][h]:i.i[n][h]+(a.i[n][h]-i.i[n][h])*l,e.i[n][h]=u,u=r?i.o[n][h]:i.o[n][h]+(a.o[n][h]-i.o[n][h])*l,e.o[n][h]=u,u=r?i.v[n][h]:i.v[n][h]+(a.v[n][h]-i.v[n][h])*l,e.v[n][h]=u}},{key:"interpolateShapeCurrentTime",value:function(t){var e=this.keyframes[0].t,s=this.keyframes[this.keyframes.length-1].t,i=this._caching.lastFrame;return i!==dt&&(i<e&&t<e||s<i&&s<t)||(this._caching.lastIndex=i<t?this._caching.lastIndex:0,this.interpolateShape(t,this.pv,this._caching)),this._caching.lastFrame=t,this.pv}},{key:"resetShape",value:function(){this.paths=this.localShapeCollection}},{key:"shapesEqual",value:function(t,e){if(t._length!==e._length||t.c!==e.c)return!1;var s,i=t._length;for(s=0;s<i;s+=1)if(t.v[s][0]!==e.v[s][0]||t.v[s][1]!==e.v[s][1]||t.o[s][0]!==e.o[s][0]||t.o[s][1]!==e.o[s][1]||t.i[s][0]!==e.i[s][0]||t.i[s][1]!==e.i[s][1])return!1;return!0}},{key:"setVValue",value:function(t){this.shapesEqual(this.v,t)||(this.v=H.clone(t),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}},{key:"processEffectsSequence",value:function(t){if(t!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=!1;var e,s=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k,i=this.effectsSequence.length;for(e=0;e<i;e+=1)s=this.effectsSequence[e](t);this.setVValue(s),this.lock=!1,this.frameId=t}else this._mdf=!1}},{key:"addEffect",value:function(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}}]),t}(),Ct=function(t){function r(t,e,s){var i;c(this,r),(i=v(this,d(r).call(this))).propType="shape",i.comp=t.comp,i.container=t,i.elem=t,i.data=e,i.k=!1,i.kf=!1,i._mdf=!1;var a=3===s?e.pt.k:e.ks.k;return i.v=H.clone(a),i.pv=H.clone(i.v),i.localShapeCollection=$.newShapeCollection(),i.paths=i.localShapeCollection,i.paths.addShape(i.v),i.reset=i.resetShape,i.effectsSequence=[],i.getValue=i.processEffectsSequence,i}return l(r,Ft),r}(),It=function(t){function r(t,e,s){var i;c(this,r),(i=v(this,d(r).call(this))).propType="shape",i.comp=t.comp,i.elem=t,i.container=t,i.keyframes=3===s?e.pt.k:e.ks.k,i.k=!0,i.kf=!0;var a=i.keyframes[0].s[0].i.length;return i.v=H.newElement(),i.v.setPathData(i.keyframes[0].s[0].c,a),i.pv=H.clone(i.v),i.localShapeCollection=$.newShapeCollection(),i.paths=i.localShapeCollection,i.paths.addShape(i.v),i.lastFrame=dt,i.reset=i.resetShape,i._caching={lastFrame:dt,lastIndex:0},i.effectsSequence=[i.interpolateShapeCurrentTime.bind(m(m(i)))],i.getValue=i.processEffectsSequence,i._hasOutTypeExpression=!1,Pt.hasSupportExpression(e)&&(i.expression=Pt.getExpression(e),i._hasOutTypeExpression="out"===i.expression.type),i}return l(r,Ft),r}(),Et=function(t){function i(t,e){var s;return c(this,i),(s=v(this,d(i).call(this))).v=H.newElement(),s.v.setPathData(!0,4),s.localShapeCollection=$.newShapeCollection(),s.paths=s.localShapeCollection,s.localShapeCollection.addShape(s.v),s.d=e.d,s.elem=t,s.comp=t.comp,s.frameId=-1,s.initDynamicPropertyContainer(t),s.p=At.getProp(t,e.p,1,0,m(m(s))),s.s=At.getProp(t,e.s,1,0,m(m(s))),s.dynamicProperties.length?s.k=!0:(s.k=!1,s.convertEllToPath()),s}return l(i,tt),p(i,[{key:"reset",value:function(){this.paths=this.localShapeCollection}},{key:"getValue",value:function(t){t!==this.frameId&&(this.iterateDynamicProperties(t),this.frameId=t,this._mdf&&this.convertEllToPath())}},{key:"convertEllToPath",value:function(){var t=this.p.v[0],e=this.p.v[1],s=this.s.v[0]/2,i=this.s.v[1]/2,a=3!==this.d,r=this.v;r.v[0][0]=t,r.v[0][1]=e-i,r.v[1][0]=a?t+s:t-s,r.v[1][1]=e,r.v[2][0]=t,r.v[2][1]=e+i,r.v[3][0]=a?t-s:t+s,r.v[3][1]=e,r.i[0][0]=a?t-s*Nt:t+s*Nt,r.i[0][1]=e-i,r.i[1][0]=a?t+s:t-s,r.i[1][1]=e-i*Nt,r.i[2][0]=a?t+s*Nt:t-s*Nt,r.i[2][1]=e+i,r.i[3][0]=a?t-s:t+s,r.i[3][1]=e+i*Nt,r.o[0][0]=a?t+s*Nt:t-s*Nt,r.o[0][1]=e-i,r.o[1][0]=a?t+s:t-s,r.o[1][1]=e+i*Nt,r.o[2][0]=a?t-s*Nt:t+s*Nt,r.o[2][1]=e+i,r.o[3][0]=a?t-s:t+s,r.o[3][1]=e-i*Nt}}]),i}(),Vt=function(t){function i(t,e){var s;return c(this,i),(s=v(this,d(i).call(this))).v=H.newElement(),s.v.setPathData(!0,0),s.elem=t,s.comp=t.comp,s.data=e,s.frameId=-1,s.d=e.d,s.initDynamicPropertyContainer(t),1===e.sy?(s.ir=At.getProp(t,e.ir,0,0,m(m(s))),s.is=At.getProp(t,e.is,0,.01,m(m(s))),s.convertToPath=s.convertStarToPath):s.convertToPath=s.convertPolygonToPath,s.pt=At.getProp(t,e.pt,0,0,m(m(s))),s.p=At.getProp(t,e.p,1,0,m(m(s))),s.r=At.getProp(t,e.r,0,mt,m(m(s))),s.or=At.getProp(t,e.or,0,0,m(m(s))),s.os=At.getProp(t,e.os,0,.01,m(m(s))),s.localShapeCollection=$.newShapeCollection(),s.localShapeCollection.addShape(s.v),s.paths=s.localShapeCollection,s.dynamicProperties.length?s.k=!0:(s.k=!1,s.convertToPath()),s}return l(i,tt),p(i,[{key:"reset",value:function(){this.paths=this.localShapeCollection}},{key:"getValue",value:function(t){t!==this.frameId&&(this.frameId=t,this.iterateDynamicProperties(t),this._mdf&&this.convertToPath())}},{key:"convertStarToPath",value:function(){var t,e,s,i,a=2*Math.floor(this.pt.v),r=2*Math.PI/a,n=!0,h=this.or.v,o=this.ir.v,p=this.os.v,l=this.is.v,u=2*Math.PI*h/(2*a),f=2*Math.PI*o/(2*a),c=-Math.PI/2;c+=this.r.v;var d=3===this.data.d?-1:1;for(t=this.v._length=0;t<a;t+=1){s=n?p:l,i=n?u:f;var m=(e=n?h:o)*Math.cos(c),v=e*Math.sin(c),y=0===m&&0===v?0:v/Math.sqrt(m*m+v*v),g=0===m&&0===v?0:-m/Math.sqrt(m*m+v*v);m+=+this.p.v[0],v+=+this.p.v[1],this.v.setTripleAt(m,v,m-y*i*s*d,v-g*i*s*d,m+y*i*s*d,v+g*i*s*d,t,!0),n=!n,c+=r*d}}},{key:"convertPolygonToPath",value:function(){var t,e=Math.floor(this.pt.v),s=2*Math.PI/e,i=this.or.v,a=this.os.v,r=2*Math.PI*i/(4*e),n=-Math.PI/2,h=3===this.data.d?-1:1;for(n+=this.r.v,t=this.v._length=0;t<e;t+=1){var o=i*Math.cos(n),p=i*Math.sin(n),l=0===o&&0===p?0:p/Math.sqrt(o*o+p*p),u=0===o&&0===p?0:-o/Math.sqrt(o*o+p*p);o+=+this.p.v[0],p+=+this.p.v[1],this.v.setTripleAt(o,p,o-l*r*a*h,p-u*r*a*h,o+l*r*a*h,p+u*r*a*h,t,!0),n+=s*h}this.paths.length=0,this.paths[0]=this.v}}]),i}(),Nt=.5519,qt=function(t){function i(t,e){var s;return c(this,i),(s=v(this,d(i).call(this))).v=H.newElement(),s.v.c=!0,s.localShapeCollection=$.newShapeCollection(),s.localShapeCollection.addShape(s.v),s.paths=s.localShapeCollection,s.elem=t,s.comp=t.comp,s.frameId=-1,s.d=e.d,s.initDynamicPropertyContainer(t),s.p=At.getProp(t,e.p,1,0,m(m(s))),s.s=At.getProp(t,e.s,1,0,m(m(s))),s.r=At.getProp(t,e.r,0,0,m(m(s))),s.dynamicProperties.length?s.k=!0:(s.k=!1,s.convertRectToPath()),s}return l(i,tt),p(i,[{key:"reset",value:function(){this.paths=this.localShapeCollection}},{key:"getValue",value:function(t){t!==this.frameId&&(this.frameId=t,this.iterateDynamicProperties(t),this._mdf&&this.convertRectToPath())}},{key:"convertRectToPath",value:function(){var t=this.p.v[0],e=this.p.v[1],s=this.s.v[0]/2,i=this.s.v[1]/2,a=Math.min(s,i,this.r.v),r=a*(1-.5519);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(t+s,e-i+a,t+s,e-i+a,t+s,e-i+r,0,!0),this.v.setTripleAt(t+s,e+i-a,t+s,e+i-r,t+s,e+i-a,1,!0),0!==a?(this.v.setTripleAt(t+s-a,e+i,t+s-a,e+i,t+s-r,e+i,2,!0),this.v.setTripleAt(t-s+a,e+i,t-s+r,e+i,t-s+a,e+i,3,!0),this.v.setTripleAt(t-s,e+i-a,t-s,e+i-a,t-s,e+i-r,4,!0),this.v.setTripleAt(t-s,e-i+a,t-s,e-i+r,t-s,e-i+a,5,!0),this.v.setTripleAt(t-s+a,e-i,t-s+a,e-i,t-s+r,e-i,6,!0),this.v.setTripleAt(t+s-a,e-i,t+s-r,e-i,t+s-a,e-i,7,!0)):(this.v.setTripleAt(t-s,e+i,t-s+r,e+i,t-s,e+i,2),this.v.setTripleAt(t-s,e-i,t-s,e-i+r,t-s,e-i,3))):(this.v.setTripleAt(t+s,e-i+a,t+s,e-i+r,t+s,e-i+a,0,!0),0!==a?(this.v.setTripleAt(t+s-a,e-i,t+s-a,e-i,t+s-r,e-i,1,!0),this.v.setTripleAt(t-s+a,e-i,t-s+r,e-i,t-s+a,e-i,2,!0),this.v.setTripleAt(t-s,e-i+a,t-s,e-i+a,t-s,e-i+r,3,!0),this.v.setTripleAt(t-s,e+i-a,t-s,e+i-r,t-s,e+i-a,4,!0),this.v.setTripleAt(t-s+a,e+i,t-s+a,e+i,t-s+r,e+i,5,!0),this.v.setTripleAt(t+s-a,e+i,t+s-r,e+i,t+s-a,e+i,6,!0),this.v.setTripleAt(t+s,e+i-a,t+s,e+i-a,t+s,e+i-r,7,!0)):(this.v.setTripleAt(t-s,e-i,t-s+r,e-i,t-s,e-i,1,!0),this.v.setTripleAt(t-s,e+i,t-s,e+i-r,t-s,e+i,2,!0),this.v.setTripleAt(t+s,e+i,t+s-r,e+i,t+s,e+i,3,!0)))}}]),i}();var Ot={getShapeProp:function(t,e,s){var i;return 3===s||4===s?i=(3===s?e.pt:e.ks).k.length?new It(t,e,s):new Ct(t,e,s):5===s?i=new qt(t,e):6===s?i=new Et(t,e):7===s&&(i=new Vt(t,e)),i.k&&t.addDynamicProperty(i),i},getConstructorFunction:function(){return Ct},getKeyframedConstructorFunction:function(){return It}},Xt=function(t){function h(t,e,s){var i;c(this,h),(i=v(this,d(h).call(this))).frameId=-1,i.elem=t,i.session=s,i.masksProperties=e||[],i.initDynamicPropertyContainer(t),i.viewData=B(i.masksProperties.length);for(var a=i.masksProperties.length,r=!1,n=0;n<a;n++)"n"!==i.masksProperties[n].mode&&(r=!0),i.viewData[n]=Ot.getShapeProp(m(m(i)),i.masksProperties[n],3),i.viewData[n].inv=i.masksProperties[n].inv;return i.hasMasks=r,i}return l(h,tt),p(h,[{key:"getValue",value:function(t){t!==this.frameId&&(this.iterateDynamicProperties(t),this.frameId=t)}}]),h}(),jt=function(){var a=Math.cos,r=Math.sin,n=Math.tan,i=Math.round;function t(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function e(t){if(0===t)return this;var e=a(t),s=r(t);return this._t(e,-s,0,0,s,e,0,0,0,0,1,0,0,0,0,1)}function s(t){if(0===t)return this;var e=a(t),s=r(t);return this._t(1,0,0,0,0,e,-s,0,0,s,e,0,0,0,0,1)}function h(t){if(0===t)return this;var e=a(t),s=r(t);return this._t(e,0,s,0,0,1,0,0,-s,0,e,0,0,0,0,1)}function o(t){if(0===t)return this;var e=a(t),s=r(t);return this._t(e,-s,0,0,s,e,0,0,0,0,1,0,0,0,0,1)}function p(t,e){return this._t(1,e,t,1,0,0)}function l(t,e){return this.shear(n(t),n(e))}function u(t,e){var s=a(e),i=r(e);return this._t(s,i,0,0,-i,s,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,n(t),1,0,0,0,0,1,0,0,0,0,1)._t(s,-i,0,0,i,s,0,0,0,0,1,0,0,0,0,1)}function f(t,e,s){return s||0===s||(s=1),1===t&&1===e&&1===s?this:this._t(t,0,0,0,0,e,0,0,0,0,s,0,0,0,0,1)}function c(t,e,s,i,a,r,n,h,o,p,l,u,f,c,d,m){return this.props[0]=t,this.props[1]=e,this.props[2]=s,this.props[3]=i,this.props[4]=a,this.props[5]=r,this.props[6]=n,this.props[7]=h,this.props[8]=o,this.props[9]=p,this.props[10]=l,this.props[11]=u,this.props[12]=f,this.props[13]=c,this.props[14]=d,this.props[15]=m,this}function d(t,e,s){return s=s||0,0!==t||0!==e||0!==s?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,s,1):this}function m(t,e,s,i,a,r,n,h,o,p,l,u,f,c,d,m){var v=this.props;if(1===t&&0===e&&0===s&&0===i&&0===a&&1===r&&0===n&&0===h&&0===o&&0===p&&1===l&&0===u)return v[12]=v[12]*t+v[15]*f,v[13]=v[13]*r+v[15]*c,v[14]=v[14]*l+v[15]*d,v[15]=v[15]*m,this._identityCalculated=!1,this;var y=v[0],g=v[1],k=v[2],_=v[3],S=v[4],M=v[5],P=v[6],T=v[7],x=v[8],w=v[9],D=v[10],L=v[11],b=v[12],A=v[13],F=v[14],C=v[15];return v[0]=y*t+g*a+k*o+_*f,v[1]=y*e+g*r+k*p+_*c,v[2]=y*s+g*n+k*l+_*d,v[3]=y*i+g*h+k*u+_*m,v[4]=S*t+M*a+P*o+T*f,v[5]=S*e+M*r+P*p+T*c,v[6]=S*s+M*n+P*l+T*d,v[7]=S*i+M*h+P*u+T*m,v[8]=x*t+w*a+D*o+L*f,v[9]=x*e+w*r+D*p+L*c,v[10]=x*s+w*n+D*l+L*d,v[11]=x*i+w*h+D*u+L*m,v[12]=b*t+A*a+F*o+C*f,v[13]=b*e+A*r+F*p+C*c,v[14]=b*s+A*n+F*l+C*d,v[15]=b*i+A*h+F*u+C*m,this._identityCalculated=!1,this}function v(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function y(t){for(var e=0;e<16;){if(t.props[e]!==this.props[e])return!1;e+=1}return!0}function g(t){var e;for(e=0;e<16;e+=1)t.props[e]=this.props[e]}function k(t){var e;for(e=0;e<16;e+=1)this.props[e]=t[e]}function _(t,e,s){return{x:t*this.props[0]+e*this.props[4]+s*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+s*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+s*this.props[10]+this.props[14]}}function S(t,e,s){return t*this.props[0]+e*this.props[4]+s*this.props[8]+this.props[12]}function M(t,e,s){return t*this.props[1]+e*this.props[5]+s*this.props[9]+this.props[13]}function P(t,e,s){return t*this.props[2]+e*this.props[6]+s*this.props[10]+this.props[14]}function T(t){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4],s=this.props[5]/e,i=-this.props[1]/e,a=-this.props[4]/e,r=this.props[0]/e,n=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e,h=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e;return[t[0]*s+t[1]*a+n,t[0]*i+t[1]*r+h,0]}function x(t){var e,s=t.length,i=[];for(e=0;e<s;e+=1)i[e]=T(t[e]);return i}function w(t,e,s){var i=st("float32",6);if(this.isIdentity())i[0]=t[0],i[1]=t[1],i[2]=e[0],i[3]=e[1],i[4]=s[0],i[5]=s[1];else{var a=this.props[0],r=this.props[1],n=this.props[4],h=this.props[5],o=this.props[12],p=this.props[13];i[0]=t[0]*a+t[1]*n+o,i[1]=t[0]*r+t[1]*h+p,i[2]=e[0]*a+e[1]*n+o,i[3]=e[0]*r+e[1]*h+p,i[4]=s[0]*a+s[1]*n+o,i[5]=s[0]*r+s[1]*h+p}return i}function D(t,e,s){return this.isIdentity()?[t,e,s]:[t*this.props[0]+e*this.props[4]+s*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+s*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+s*this.props[10]+this.props[14]]}function L(t,e){if(this.isIdentity())return t+","+e;var s=this.props;return Math.round(100*(t*s[0]+e*s[4]+s[12]))/100+","+Math.round(100*(t*s[1]+e*s[5]+s[13]))/100}function b(){for(var t=0,e=this.props,s="matrix3d(";t<16;)s+=i(1e4*e[t])/1e4,s+=15===t?")":",",t+=1;return s}function A(t){return t<1e-6&&0<t||-1e-6<t&&t<0?i(1e4*t)/1e4:t}function F(){var t=this.props;return"matrix("+A(t[0])+","+A(t[1])+","+A(t[4])+","+A(t[5])+","+A(t[12])+","+A(t[13])+")"}return function(){this.reset=t,this.rotate=e,this.rotateX=s,this.rotateY=h,this.rotateZ=o,this.skew=l,this.skewFromAxis=u,this.shear=p,this.scale=f,this.setTransform=c,this.translate=d,this.transform=m,this.applyToPoint=_,this.applyToX=S,this.applyToY=M,this.applyToZ=P,this.applyToPointArray=D,this.applyToTriplePoints=w,this.applyToPointStringified=L,this.toCSS=b,this.to2dCSS=F,this.clone=g,this.cloneFromProps=k,this.equals=y,this.inversePoints=x,this.inversePoint=T,this._t=this.transform,this.isIdentity=v,this._identity=!0,this._identityCalculated=!1,this.props=st("float32",16),this.reset()}}(),Yt=function(){function t(){c(this,t),this.sequences={},this.sequenceList=[],this.transform_key_count=0}return p(t,[{key:"addTransformSequence",value:function(t){for(var e=t.length,s="_",i=0;i<e;i+=1)s+=t[i].transform.key+"_";var a=this.sequences[s];return a||(a={transforms:[].concat(t),finalTransform:new jt,_mdf:!1},this.sequences[s]=a,this.sequenceList.push(a)),a}},{key:"processSequence",value:function(t,e){for(var s,i=0,a=e,r=t.transforms.length;i<r&&!e;){if(t.transforms[i].transform.mProps._mdf){a=!0;break}i+=1}if(a)for(t.finalTransform.reset(),i=r-1;0<=i;i-=1)s=t.transforms[i].transform.mProps.v.props,t.finalTransform.transform(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9],s[10],s[11],s[12],s[13],s[14],s[15]);t._mdf=a}},{key:"processSequences",value:function(t){for(var e=this.sequenceList.length,s=0;s<e;s+=1)this.processSequence(this.sequenceList[s],t)}},{key:"getNewKey",value:function(){return"_"+this.transform_key_count++}}]),t}(),zt=function t(e,s){c(this,t),this.elem=e,this.pos=s},Bt=function(){function o(t,e,s,i){c(this,o),this.styledShapes=[],this.tr=[0,0,0,0,0,0];var a=4;"rc"==e.ty?a=5:"el"==e.ty?a=6:"sr"==e.ty&&(a=7),this.sh=Ot.getShapeProp(t,e,a);for(var r=s.length,n=0;n<r;n+=1)if(!s[n].closed){var h={transforms:i.addTransformSequence(s[n].transforms),trNodes:[]};this.styledShapes.push(h),s[n].elements.push(h)}}return p(o,[{key:"setAsAnimated",value:function(){this._isAnimated=!0}}]),o}(),Rt={};function Gt(t){return Rt[t]}var Kt={Type:{Null:"Null",Path:"Path",Shape:"Shape",Solid:"Solid",Sprite:"Sprite",Component:"Component",Container:"Container"},registerDisplayByType:function(t,e){Rt[t]=e}},Jt=function(){function a(t,e,s){c(this,a),this.elem=t,this.data=e,this.type=e.ty,this.preTransforms=s,this.transforms=[],this.elements=[],this.closed=!0===e.hd,this.displayType=Kt.Type.Path;var i=Gt(this.displayType);this.display=new i(this,e),this.elem.innerDisplay?this.elem.innerDisplay.addChild(this.display):this.elem.display.addChild(this.display)}return p(a,[{key:"updateGrahpics",value:function(){this.display.updateLottieGrahpics(this)}}]),a}(),Ht=function(t){function n(t,e,s){var i;if(c(this,n),(i=v(this,d(n).call(this))).elem=t,i.frameId=-1,i.propType="transform",i.data=e,i.v=new jt,i.pre=new jt,i.appliedTransformations=0,i.initDynamicPropertyContainer(s||t),e.p&&e.p.s?(i.px=At.getProp(t,e.p.x,0,0,m(m(i))),i.py=At.getProp(t,e.p.y,0,0,m(m(i))),e.p.z&&(i.pz=At.getProp(t,e.p.z,0,0,m(m(i))))):i.p=At.getProp(t,e.p||{k:[0,0,0]},1,0,m(m(i))),e.rx){if(i.rx=At.getProp(t,e.rx,0,mt,m(m(i))),i.ry=At.getProp(t,e.ry,0,mt,m(m(i))),i.rz=At.getProp(t,e.rz,0,mt,m(m(i))),e.or.k[0].ti){var a,r=e.or.k.length;for(a=0;a<r;a+=1)e.or.k[a].to=e.or.k[a].ti=null}i.or=At.getProp(t,e.or,1,mt,m(m(i))),i.or.sh=!0}else i.r=At.getProp(t,e.r||{k:0},0,mt,m(m(i)));return e.sk&&(i.sk=At.getProp(t,e.sk,0,mt,m(m(i))),i.sa=At.getProp(t,e.sa,0,mt,m(m(i)))),i.a=At.getProp(t,e.a||{k:[0,0,0]},1,0,m(m(i))),i.s=At.getProp(t,e.s||{k:[100,100,100]},1,.01,m(m(i))),e.o?i.o=At.getProp(t,e.o,0,.01,t):i.o={_mdf:!1,v:1},i._isDirty=!0,i.dynamicProperties.length||i.getValue(dt,!0),i}return l(n,tt),p(n,[{key:"getValue",value:function(t,e){if(t!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||e){if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var s,i,a=this.elem.globalData.frameRate;if(this.p&&this.p.keyframes&&this.p.getValueAtTime)i=this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(s=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/a,0),this.p.getValueAtTime(this.p.keyframes[0].t/a,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(s=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/a,0),this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/a,0)):(s=this.p.pv,this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/a,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){s=[],i=[];var r=this.px,n=this.py;r._caching.lastFrame+r.offsetTime<=r.keyframes[0].t?(s[0]=r.getValueAtTime((r.keyframes[0].t+.01)/a,0),s[1]=n.getValueAtTime((n.keyframes[0].t+.01)/a,0),i[0]=r.getValueAtTime(r.keyframes[0].t/a,0),i[1]=n.getValueAtTime(n.keyframes[0].t/a,0)):r._caching.lastFrame+r.offsetTime>=r.keyframes[r.keyframes.length-1].t?(s[0]=r.getValueAtTime(r.keyframes[r.keyframes.length-1].t/a,0),s[1]=n.getValueAtTime(n.keyframes[n.keyframes.length-1].t/a,0),i[0]=r.getValueAtTime((r.keyframes[r.keyframes.length-1].t-.01)/a,0),i[1]=n.getValueAtTime((n.keyframes[n.keyframes.length-1].t-.01)/a,0)):(s=[r.pv,n.pv],i[0]=r.getValueAtTime((r._caching.lastFrame+r.offsetTime-.01)/a,r.offsetTime),i[1]=n.getValueAtTime((n._caching.lastFrame+n.offsetTime-.01)/a,n.offsetTime))}else s=i=vt;this.v.rotate(-Math.atan2(s[1]-i[1],s[0]-i[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=t}}},{key:"precalculateMatrix",value:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}if(this.r){if(this.r.effectsSequence.length)return;this.pre.rotate(-this.r.v),this.appliedTransformations=4}else this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}}},{key:"applyToMatrix",value:function(t){var e=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||e,this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&t.skewFromAxis(-this.sk.v,this.sa.v),this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?t.translate(this.px.v,this.py.v,-this.pz.v):t.translate(this.px.v,this.py.v,0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}}]),n}();function Ut(t,e,s){return new Ht(t,e,s)}var Zt=function(t){function e(){return c(this,e),v(this,d(e).apply(this,arguments))}return l(e,tt),p(e,[{key:"initModifierProperties",value:function(){}},{key:"addShapeToModifier",value:function(){}},{key:"addShape",value:function(t){if(!this.closed){t.sh.container.addDynamicProperty(t.sh);var e={shape:t.sh,data:t,localShapeCollection:$.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated()}}},{key:"init",value:function(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=dt,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)}},{key:"processKeys",value:function(t){t!==this.frameId&&(this.frameId=t,this.iterateDynamicProperties(t))}}]),e}(),Qt=function(t){function e(){return c(this,e),v(this,d(e).apply(this,arguments))}return l(e,Zt),p(e,[{key:"initModifierProperties",value:function(t,e){this.s=At.getProp(t,e.s,0,.01,this),this.e=At.getProp(t,e.e,0,.01,this),this.o=At.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length}},{key:"addShapeToModifier",value:function(t){t.pathsData=[]}},{key:"calculateShapeEdges",value:function(t,e,s,i,a){var r=[];e<=1?r.push({s:t,e:e}):1<=t?r.push({s:t-1,e:e-1}):(r.push({s:t,e:1}),r.push({s:0,e:e-1}));var n,h,o=[],p=r.length;for(n=0;n<p;n+=1)if((h=r[n]).e*a<i||h.s*a>i+s);else{var l=void 0,u=void 0;l=h.s*a<=i?0:(h.s*a-i)/s,u=h.e*a>=i+s?1:(h.e*a-i)/s,o.push([l,u])}return o.length||o.push([0,0]),o}},{key:"releasePathsData",value:function(t){for(var e=t.length,s=0;s<e;s+=1)at.release(t[s]);return t.length=0,t}},{key:"processShapes",value:function(t){var e,s,i,a;if(this._mdf||t){var r=this.o.v%360/360;if(r<0&&(r+=1),e=(1<this.s.v?1:this.s.v<0?0:this.s.v)+r,(s=(1<this.e.v?1:this.e.v<0?0:this.e.v)+r)<e){var n=e;e=s,s=n}e=1e-4*Math.round(1e4*e),s=1e-4*Math.round(1e4*s),this.sValue=e,this.eValue=s}else e=this.sValue,s=this.eValue;var h,o,p,l,u,f=this.shapes.length,c=0;if(s===e)for(a=0;a<f;a+=1)this.shapes[a].localShapeCollection.releaseShapes(),this.shapes[a].shape._mdf=!0,this.shapes[a].shape.paths=this.shapes[a].localShapeCollection,this._mdf&&(this.shapes[a].pathsData.length=0);else if(1===s&&0===e||0===s&&1===e){if(this._mdf)for(a=0;a<f;a+=1)this.shapes[a].pathsData.length=0,this.shapes[a].shape._mdf=!0}else{var d,m,v=[];for(a=0;a<f;a+=1)if((d=this.shapes[a]).shape._mdf||this._mdf||t||2===this.m){if(o=(i=d.shape.paths)._length,u=0,!d.shape._mdf&&d.pathsData.length)u=d.totalShapeLength;else{for(p=this.releasePathsData(d.pathsData),h=0;h<o;h+=1)l=ct.getSegmentsLength(i.shapes[h]),p.push(l),u+=l.totalLength;d.totalShapeLength=u,d.pathsData=p}c+=u,d.shape._mdf=!0}else d.shape.paths=d.localShapeCollection;var y,g=e,k=s,_=0;for(a=f-1;0<=a;a-=1)if((d=this.shapes[a]).shape._mdf){for((m=d.localShapeCollection).releaseShapes(),2===this.m&&1<f?(y=this.calculateShapeEdges(e,s,d.totalShapeLength,_,c),_+=d.totalShapeLength):y=[[g,k]],o=y.length,h=0;h<o;h+=1){g=y[h][0],k=y[h][1],v.length=0,k<=1?v.push({s:d.totalShapeLength*g,e:d.totalShapeLength*k}):1<=g?v.push({s:d.totalShapeLength*(g-1),e:d.totalShapeLength*(k-1)}):(v.push({s:d.totalShapeLength*g,e:d.totalShapeLength}),v.push({s:0,e:d.totalShapeLength*(k-1)}));var S=this.addShapes(d,v[0]);if(v[0].s!==v[0].e){if(1<v.length)if(d.shape.paths.shapes[d.shape.paths._length-1].c){var M=S.pop();this.addPaths(S,m),S=this.addShapes(d,v[1],M)}else this.addPaths(S,m),S=this.addShapes(d,v[1]);this.addPaths(S,m)}}d.shape.paths=m}}}},{key:"addPaths",value:function(t,e){for(var s=t.length,i=0;i<s;i+=1)e.addShape(t[i])}},{key:"addSegment",value:function(t,e,s,i,a,r,n){a.setXYAt(e[0],e[1],"o",r),a.setXYAt(s[0],s[1],"i",r+1),n&&a.setXYAt(t[0],t[1],"v",r),a.setXYAt(i[0],i[1],"v",r+1)}},{key:"addSegmentFromArray",value:function(t,e,s,i){e.setXYAt(t[1],t[5],"o",s),e.setXYAt(t[2],t[6],"i",s+1),i&&e.setXYAt(t[0],t[4],"v",s),e.setXYAt(t[3],t[7],"v",s+1)}},{key:"addShapes",value:function(t,e,s){var i,a,r,n,h,o,p,l,u=t.pathsData,f=t.shape.paths.shapes,c=t.shape.paths._length,d=0,m=[],v=!0;for(l=s?(h=s._length,s._length):(s=H.newElement(),h=0),m.push(s),i=0;i<c;i+=1){for(o=u[i].lengths,s.c=f[i].c,r=f[i].c?o.length:o.length+1,a=1;a<r;a+=1)if(d+(n=o[a-1]).addedLength<e.s)d+=n.addedLength,s.c=!1;else{if(d>e.e){s.c=!1;break}e.s<=d&&e.e>=d+n.addedLength?(this.addSegment(f[i].v[a-1],f[i].o[a-1],f[i].i[a],f[i].v[a],s,h,v),v=!1):(p=ct.getNewSegment(f[i].v[a-1],f[i].v[a],f[i].o[a-1],f[i].i[a],(e.s-d)/n.addedLength,(e.e-d)/n.addedLength,o[a-1]),this.addSegmentFromArray(p,s,h,v),v=!1,s.c=!1),d+=n.addedLength,h+=1}if(f[i].c&&o.length){if(n=o[a-1],d<=e.e){var y=o[a-1].addedLength;e.s<=d&&e.e>=d+y?(this.addSegment(f[i].v[a-1],f[i].o[a-1],f[i].i[0],f[i].v[0],s,h,v),v=!1):(p=ct.getNewSegment(f[i].v[a-1],f[i].v[0],f[i].o[a-1],f[i].i[0],(e.s-d)/y,(e.e-d)/y,o[a-1]),this.addSegmentFromArray(p,s,h,v),v=!1,s.c=!1)}else s.c=!1;d+=n.addedLength,h+=1}if(s._length&&(s.setXYAt(s.v[l][0],s.v[l][1],"i",l),s.setXYAt(s.v[s._length-1][0],s.v[s._length-1][1],"o",s._length-1)),d>e.e)break;i<c-1&&(s=H.newElement(),v=!0,m.push(s),h=0)}return m}}]),e}(),Wt=.5519,$t=function(t){function e(){return c(this,e),v(this,d(e).apply(this,arguments))}return l(e,Zt),p(e,[{key:"initModifierProperties",value:function(t,e){this.getValue=this.processKeys,this.rd=At.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length}},{key:"processPath",value:function(t,e){var s,i=H.newElement();i.c=t.c;var a,r,n,h,o,p,l,u,f,c,d,m,v=t._length,y=0;for(s=0;s<v;s+=1)a=t.v[s],n=t.o[s],r=t.i[s],a[0]===n[0]&&a[1]===n[1]&&a[0]===r[0]&&a[1]===r[1]?0!==s&&s!==v-1||t.c?(h=0===s?t.v[v-1]:t.v[s-1],p=(o=Math.sqrt(Math.pow(a[0]-h[0],2)+Math.pow(a[1]-h[1],2)))?Math.min(o/2,e)/o:0,l=d=a[0]+(h[0]-a[0])*p,u=m=a[1]-(a[1]-h[1])*p,f=l-(l-a[0])*Wt,c=u-(u-a[1])*Wt,i.setTripleAt(l,u,f,c,d,m,y),y+=1,h=s===v-1?t.v[0]:t.v[s+1],p=(o=Math.sqrt(Math.pow(a[0]-h[0],2)+Math.pow(a[1]-h[1],2)))?Math.min(o/2,e)/o:0,l=f=a[0]+(h[0]-a[0])*p,u=c=a[1]+(h[1]-a[1])*p,d=l-(l-a[0])*Wt,m=u-(u-a[1])*Wt,i.setTripleAt(l,u,f,c,d,m,y)):i.setTripleAt(a[0],a[1],n[0],n[1],r[0],r[1],y):i.setTripleAt(t.v[s][0],t.v[s][1],t.o[s][0],t.o[s][1],t.i[s][0],t.i[s][1],y),y+=1;return i}},{key:"processShapes",value:function(t){var e,s,i,a,r,n,h=this.shapes.length,o=this.rd.v;if(0!==o)for(s=0;s<h;s+=1){if(n=(r=this.shapes[s]).localShapeCollection,r.shape._mdf||this._mdf||t)for(n.releaseShapes(),r.shape._mdf=!0,e=r.shape.paths.shapes,a=r.shape.paths._length,i=0;i<a;i+=1)n.addShape(this.processPath(e[i],o));r.shape.paths=r.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)}}]),e}(),te=function(t){function e(){return c(this,e),v(this,d(e).apply(this,arguments))}return l(e,Zt),p(e,[{key:"initModifierProperties",value:function(t,e){this.getValue=this.processKeys,this.c=At.getProp(t,e.c,0,null,this),this.o=At.getProp(t,e.o,0,null,this),this.tr=Ut(t,e.tr,this),this.so=At.getProp(t,e.tr.so,0,.01,this),this.eo=At.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new jt,this.rMatrix=new jt,this.sMatrix=new jt,this.tMatrix=new jt,this.matrix=new jt}},{key:"applyTransforms",value:function(t,e,s,i,a,r){var n=r?-1:1,h=i.s.v[0]+(1-i.s.v[0])*(1-a),o=i.s.v[1]+(1-i.s.v[1])*(1-a);t.translate(i.p.v[0]*n*a,i.p.v[1]*n*a,i.p.v[2]),e.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),e.rotate(-i.r.v*n*a),e.translate(i.a.v[0],i.a.v[1],i.a.v[2]),s.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),s.scale(r?1/h:h,r?1/o:o),s.translate(i.a.v[0],i.a.v[1],i.a.v[2])}},{key:"init",value:function(t,e,s,i){for(this.elem=t,this.arr=e,this.pos=s,this.elemsData=i,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[s]);0<s;)s-=1,this._elements.unshift(e[s]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)}},{key:"resetElements",value:function(t){for(var e=t.length,s=0;s<e;s+=1)t[s]._processed=!1,"gr"===t[s].ty&&this.resetElements(t[s].it)}},{key:"cloneElements",value:function(t){var e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e}},{key:"changeGroupRender",value:function(t,e){for(var s=t.length,i=0;i<s;i+=1)t[i]._render=e,"gr"===t[i].ty&&this.changeGroupRender(t[i].it,e)}},{key:"processShapes",value:function(t){if(this._mdf||t){var e=Math.ceil(this.c.v);if(this._groups.length<e){for(;this._groups.length<e;){var s={it:this.cloneElements(this._elements),ty:"gr"};s.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,s),this._groups.splice(0,0,s),this._currentCopies+=1}this.elem.reloadShapes()}var i,a,r=0;for(i=0;i<=this._groups.length-1;i+=1)a=r<e,this._groups[i]._render=a,this.changeGroupRender(this._groups[i].it,a),r+=1;this._currentCopies=e;var n=this.o.v,h=n%1,o=0<n?Math.floor(n):Math.ceil(n),p=this.pMatrix.props,l=this.rMatrix.props,u=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var f=0;if(0<n){for(;f<o;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),f+=1;h&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,h,!1),f+=h)}else if(n<0){for(;o<f;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),f-=1;h&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-h,!0),f-=h)}i=1===this.data.m?0:this._currentCopies-1;var c=1===this.data.m?1:-1;for(r=this._currentCopies;r;){var d=this.elemsData[i].it,m=d[d.length-1].transform.mProps.v.props,v=m.length;if(d[d.length-1].transform.mProps._mdf=!0,d[d.length-1].transform.op._mdf=!0,d[d.length-1].transform.op.v=this.so.v+(this.eo.v-this.so.v)*(i/(this._currentCopies-1)),0!==f){(0!==i&&1===c||i!==this._currentCopies-1&&-1===c)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15]),this.matrix.transform(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11],u[12],u[13],u[14],u[15]),this.matrix.transform(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15]);for(var y=0;y<v;y+=1)m[y]=this.matrix.props[y];this.matrix.reset()}else{this.matrix.reset();for(var g=0;g<v;g+=1)m[g]=this.matrix.props[g]}f+=1,r-=1,i+=c}}else for(var k=this._currentCopies,_=0;k;){var S=this.elemsData[_].it;S[S.length-1].transform.mProps._mdf=!1,S[S.length-1].transform.op._mdf=!1,k-=1,_+=1}}},{key:"addShape",value:function(){}}]),e}(),ee=function(t){function e(){return c(this,e),v(this,d(e).apply(this,arguments))}return l(e,Zt),p(e,[{key:"initModifierProperties",value:function(t,e){this.getValue=this.processKeys,this.data=e,this.positions=[]}},{key:"processKeys",value:function(t,e){(t!==this.frameId||e)&&(this._mdf=!0)}},{key:"addShapeToModifier",value:function(){this.positions.push([])}},{key:"processPath",value:function(t,e,s){var i,a,r,n,h=t.v.length,o=[],p=[],l=[];for(i=0;i<h;i+=1){s.v[i]||(s.v[i]=[t.v[i][0],t.v[i][1]],s.o[i]=[t.o[i][0],t.o[i][1]],s.i[i]=[t.i[i][0],t.i[i][1]],s.distV[i]=0,s.distO[i]=0,s.distI[i]=0),a=Math.atan2(t.v[i][1]-e[1],t.v[i][0]-e[0]),r=e[0]-s.v[i][0],n=e[1]-s.v[i][1];var u=Math.sqrt(r*r+n*n);s.distV[i]+=(u-s.distV[i])*this.data.dc,s.v[i][0]=Math.cos(a)*Math.max(0,this.data.maxDist-s.distV[i])/2+t.v[i][0],s.v[i][1]=Math.sin(a)*Math.max(0,this.data.maxDist-s.distV[i])/2+t.v[i][1],a=Math.atan2(t.o[i][1]-e[1],t.o[i][0]-e[0]),r=e[0]-s.o[i][0],n=e[1]-s.o[i][1],u=Math.sqrt(r*r+n*n),s.distO[i]+=(u-s.distO[i])*this.data.dc,s.o[i][0]=Math.cos(a)*Math.max(0,this.data.maxDist-s.distO[i])/2+t.o[i][0],s.o[i][1]=Math.sin(a)*Math.max(0,this.data.maxDist-s.distO[i])/2+t.o[i][1],a=Math.atan2(t.i[i][1]-e[1],t.i[i][0]-e[0]),r=e[0]-s.i[i][0],n=e[1]-s.i[i][1],u=Math.sqrt(r*r+n*n),s.distI[i]+=(u-s.distI[i])*this.data.dc,s.i[i][0]=Math.cos(a)*Math.max(0,this.data.maxDist-s.distI[i])/2+t.i[i][0],s.i[i][1]=Math.sin(a)*Math.max(0,this.data.maxDist-s.distI[i])/2+t.i[i][1],o.push(s.v[i]),p.push(s.o[i]),l.push(s.i[i])}return{v:o,o:p,i:l,c:t.c}}},{key:"processShapes",value:function(){var t,e,s,i,a=this.elem.globalData.mouseX,r=this.elem.globalData.mouseY,n=this.shapes.length;if(a){var h,o=this.elem.globalToLocal([a,r,0]),p=[];for(e=0;e<n;e+=1)if((h=this.shapes[e]).shape._mdf||this._mdf){for(h.shape._mdf=!0,i=(t=h.shape.paths).length,s=0;s<i;s+=1)this.positions[e][s]||(this.positions[e][s]={v:[],o:[],i:[],distV:[],distO:[],distI:[]}),p.push(this.processPath(t[s],o,this.positions[e][s]));h.shape.paths=p,h.last=p}else h.shape.paths=h.last}}}]),e}(),se={};function ie(t,e){se[t]||(se[t]=e)}ie("tm",Qt),ie("rd",$t),ie("rp",te),ie("ms",ee);var ae={getModifier:function(t,e,s){return new se[t](e,s)}},re=function(t){function h(t,e,s){var i,a;c(this,h),(i=v(this,d(h).call(this))).elem=t,i.frameId=-1,i.dataProps=B(e.length),i.k=!1,i.dashArray=st("float32",e.length?e.length-1:0),i.dashoffset=st("float32",1),i.initDynamicPropertyContainer(s);var r,n=e.length||0;for(a=0;a<n;a+=1)r=At.getProp(t,e[a].v,0,0,m(m(i))),i.k=r.k||i.k,i.dataProps[a]={n:e[a].n,p:r};return i.k||i.getValue(!0),i._isAnimated=i.k,i}return l(h,tt),p(h,[{key:"getValue",value:function(t,e){if((t!==this.frameId||e)&&(this.frameId=t,this.iterateDynamicProperties(),this._mdf=this._mdf||e,this._mdf)){var s=0,i=this.dataProps.length;for(s=0;s<i;s+=1)"o"!=this.dataProps[s].n?this.dashArray[s]=this.dataProps[s].p.v:this.dashoffset[0]=this.dataProps[s].p.v}}}]),h}(),ne=function(t){function r(t,e,s){var i;c(this,r),(i=v(this,d(r).call(this))).data=e,i.c=st("uint8c",4*e.p);var a=e.k.k[0].s?e.k.k[0].s.length-4*e.p:e.k.k.length-4*e.p;return i.o=st("float32",a),i._cmdf=!1,i._omdf=!1,i._collapsable=i.checkCollapsable(),i._hasOpacity=a,i.initDynamicPropertyContainer(s),i.prop=At.getProp(t,e.k,1,null,m(m(i))),i.k=i.prop.k,i.getValue(!0),i}return l(r,tt),p(r,[{key:"comparePoints",value:function(t,e){for(var s=0,i=this.o.length/2;s<i;){if(.01<Math.abs(t[4*s]-t[4*e+2*s]))return!1;s+=1}return!0}},{key:"checkCollapsable",value:function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var t=0,e=this.data.k.k.length;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0}},{key:"getValue",value:function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){var e,s,i,a=4*this.data.p;for(e=0;e<a;e+=1)s=e%4==0?100:255,i=Math.round(this.prop.v[e]*s),this.c[e]!==i&&(this.c[e]=i,this._cmdf=!t);if(this.o.length)for(a=this.prop.v.length,e=4*this.data.p;e<a;e+=1)s=e%2==0?100:1,i=e%2==0?Math.round(100*this.prop.v[e]):this.prop.v[e],this.o[e-4*this.data.p]!==i&&(this.o[e-4*this.data.p]=i,this._omdf=!t);this._mdf=!t}}}]),r}(),he=function(t){function a(t,e,s){var i;return c(this,a),(i=v(this,d(a).call(this))).frameId=-1,i.keyframesManager=t,i.elem=t.elem,i.session=s,i.shapes=[],i.shapesData=e,i.stylesList=[],i.itemsData=[],i.prevViewData=[],i.shapeModifiers=[],i.processedElements=[],i.transformsManager=new Yt,i.initDynamicPropertyContainer(t),i.lcEnum={1:"butt",2:"round",3:"square"},i.ljEnum={1:"miter",2:"round",3:"bevel"},i._isFirstFrame=!0,i.transformHelper={opacity:1,_opMdf:!1},i.searchShapes(i.shapesData,i.itemsData,i.prevViewData,!0,[]),i._isAnimated||(i.transformHelper.opacity=1,i.transformHelper._opMdf=!1,i.updateModifiers(i.frameId),i.transformsManager.processSequences(i._isFirstFrame),i.updateShape(i.transformHelper,i.shapesData,i.itemsData),i.updateGrahpics()),i}return l(a,tt),p(a,[{key:"createStyleElement",value:function(t,e){var s=new Jt(this.elem,t,this.transformsManager.addTransformSequence(e)),i={};if("fl"==t.ty||"st"==t.ty?(i.c=At.getProp(this,t.c,1,255,this),i.c.k||(s.co=i.c.v)):"gf"!==t.ty&&"gs"!==t.ty||(i.s=At.getProp(this,t.s,1,null,this),i.e=At.getProp(this,t.e,1,null,this),i.h=At.getProp(this,t.h||{k:0},0,.01,this),i.a=At.getProp(this,t.a||{k:0},0,mt,this),i.g=new ne(this,t.g,this)),i.o=At.getProp(this,t.o,0,.01,this),"st"==t.ty||"gs"==t.ty){if(s.lc=this.lcEnum[t.lc]||"round",s.lj=this.ljEnum[t.lj]||"round",1==t.lj&&(s.ml=t.ml),i.w=At.getProp(this,t.w,0,null,this),i.w.k||(s.wi=i.w.v),t.d){var a=new re(this,t.d,"canvas",this);i.d=a,i.d.k||(s.da=i.d.dashArray,s.do=i.d.dashoffset[0])}}else s.r=2===t.r?"evenodd":"nonzero";return this.stylesList.push(s),i.style=s,i}},{key:"addShapeToModifiers",value:function(t){var e,s=this.shapeModifiers.length;for(e=0;e<s;e+=1)this.shapeModifiers[e].addShape(t)}},{key:"isShapeInAnimatedModifiers",value:function(t){for(var e=this.shapeModifiers.length;0<e;)if(this.shapeModifiers[0].isAnimatedWithShape(t))return!0;return!1}},{key:"updateModifiers",value:function(t){if(this.shapeModifiers.length){var e,s=this.shapes.length;for(e=0;e<s;e+=1)this.shapes[e].sh.reset();for(e=(s=this.shapeModifiers.length)-1;0<=e;e-=1)this.shapeModifiers[e].processShapes(t,this._isFirstFrame)}}},{key:"searchProcessedElement",value:function(t){for(var e=this.processedElements,s=0,i=e.length;s<i;){if(e[s].elem===t)return e[s].pos;s+=1}return 0}},{key:"addProcessedElement",value:function(t,e){for(var s=this.processedElements,i=s.length;i;)if(s[i-=1].elem===t)return void(s[i].pos=e);s.push(new zt(t,e))}},{key:"createGroupElement",value:function(){return{it:[],prevViewData:[]}}},{key:"createTransformElement",value:function(t){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:At.getProp(this,t.o,0,.01,this),mProps:Ut(this,t,this)}}}},{key:"createShapeElement",value:function(t){var e=new Bt(this,t,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e}},{key:"reloadShapes",value:function(){var t;this._isFirstFrame=!0;var e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.updateModifiers(),this.transformsManager.processSequences(this._isFirstFrame)}},{key:"addTransformToStyleList",value:function(t){for(var e=this.stylesList.length,s=0;s<e;s+=1)this.stylesList[s].closed||this.stylesList[s].transforms.push(t)}},{key:"removeTransformFromStyleList",value:function(){for(var t=this.stylesList.length,e=0;e<t;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.pop()}},{key:"closeStyles",value:function(t){for(var e=t.length,s=0;s<e;s+=1)t[s].closed=!0}},{key:"searchShapes",value:function(t,e,s,i,a){var r,n,h,o,p,l,u=t.length-1,f=[],c=[],d=[].concat(a);for(r=u;0<=r;r-=1){if((o=this.searchProcessedElement(t[r]))?e[r]=s[o-1]:t[r]._shouldRender=i,"fl"==t[r].ty||"st"==t[r].ty||"gf"==t[r].ty||"gs"==t[r].ty)o?e[r].style.closed=!1:e[r]=this.createStyleElement(t[r],d),f.push(e[r].style);else if("gr"==t[r].ty){if(o)for(h=e[r].it.length,n=0;n<h;n+=1)e[r].prevViewData[n]=e[r].it[n];else e[r]=this.createGroupElement(t[r]);this.searchShapes(t[r].it,e[r].it,e[r].prevViewData,i,d)}else"tr"==t[r].ty?(o||(l=this.createTransformElement(t[r]),e[r]=l),d.push(e[r]),this.addTransformToStyleList(e[r])):"sh"==t[r].ty||"rc"==t[r].ty||"el"==t[r].ty||"sr"==t[r].ty?o||(e[r]=this.createShapeElement(t[r])):"tm"==t[r].ty||"rd"==t[r].ty?(o?(p=e[r]).closed=!1:((p=ae.getModifier(t[r].ty)).init(this,t[r]),e[r]=p,this.shapeModifiers.push(p)),c.push(p)):"rp"==t[r].ty&&(o?(p=e[r]).closed=!0:(p=ae.getModifier(t[r].ty),(e[r]=p).init(this,t,r,e),this.shapeModifiers.push(p),i=!1),c.push(p));this.addProcessedElement(t[r],r+1)}for(this.removeTransformFromStyleList(),this.closeStyles(f),u=c.length,r=0;r<u;r+=1)c[r].closed=!0}},{key:"updateShapeTransform",value:function(t,e){(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)}},{key:"updateStyledShape",value:function(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){var s,i,a,r=t.trNodes,n=e.paths,h=n._length;r.length=0;var o=t.transforms.finalTransform;for(a=0;a<h;a+=1){var p=n.shapes[a];if(p&&p.v){for(i=p._length,s=1;s<i;s+=1)1===s&&r.push({t:"m",p:o.applyToPointArray(p.v[0][0],p.v[0][1],0)}),r.push({t:"c",pts:o.applyToTriplePoints(p.o[s-1],p.i[s],p.v[s])});1===i&&r.push({t:"m",p:o.applyToPointArray(p.v[0][0],p.v[0][1],0)}),p.c&&i&&(r.push({t:"c",pts:o.applyToTriplePoints(p.o[s-1],p.i[0],p.v[0])}),r.push({t:"z"}))}}t.trNodes=r}}},{key:"updatePath",value:function(t,e){if(!0!==t.hd&&t._shouldRender){var s,i=e.styledShapes.length;for(s=0;s<i;s+=1)this.updateStyledShape(e.styledShapes[s],e.sh)}}},{key:"updateFill",value:function(t,e,s){var i=e.style;(e.c._mdf||this._isFirstFrame)&&(i.co=e.c.v),(e.o._mdf||s._opMdf||this._isFirstFrame)&&(i.coOp=e.o.v*s.opacity)}},{key:"updateStroke",value:function(t,e,s){var i=e.style,a=e.d;a&&(a._mdf||this._isFirstFrame)&&(i.da=a.dashArray,i.do=a.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(i.co=e.c.v),(e.o._mdf||s._opMdf||this._isFirstFrame)&&(i.coOp=e.o.v*s.opacity),(e.w._mdf||this._isFirstFrame)&&(i.wi=e.w.v)}},{key:"updateGradientFill",value:function(t,e,s){var i=e.style;i.grd=e.g.c[0],i.coOp=e.o.v*s.opacity}},{key:"updateShape",value:function(t,e,s){for(var i=t,a=e.length-1;0<=a;a-=1)"tr"==e[a].ty?(i=s[a].transform,this.updateShapeTransform(t,i)):"sh"==e[a].ty||"el"==e[a].ty||"rc"==e[a].ty||"sr"==e[a].ty?this.updatePath(e[a],s[a]):"fl"==e[a].ty?this.updateFill(e[a],s[a],i):"st"==e[a].ty?this.updateStroke(e[a],s[a],i):"gf"==e[a].ty||"gs"==e[a].ty?this.updateGradientFill(e[a],s[a],i):"gr"==e[a].ty&&this.updateShape(i,e[a].it,s[a].it)}},{key:"updateGrahpics",value:function(){for(var t=this.stylesList.length,e=0;e<t;e+=1){this.stylesList[e].updateGrahpics()}}},{key:"getValue",value:function(t){t!==this.frameId&&(this.iterateDynamicProperties(t),this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.updateModifiers(t),this.transformsManager.processSequences(this._isFirstFrame),this.updateShape(this.transformHelper,this.shapesData,this.itemsData),this.updateGrahpics(),this.frameId=t)}}]),a}(),oe=function(t){function a(t,e,s){var i;return c(this,a),(i=v(this,d(a).call(this,t,e))).frameId=-1,i.hs=e,i.session=s,i}return l(a,Ht),p(a,[{key:"getValue",value:function(t){t!==this.frameId&&(this.iterateDynamicProperties(t),this.frameId=t)}},{key:"x",get:function(){return this.p?this.p.v[0]:this.px.v}},{key:"y",get:function(){return this.p?this.p.v[1]:this.py.v}},{key:"anchorX",get:function(){return this.a.v[0]}},{key:"anchorY",get:function(){return this.a.v[1]}},{key:"scaleX",get:function(){return this.s.v[0]}},{key:"scaleY",get:function(){return this.s.v[1]}},{key:"rotation",get:function(){return this.r&&this.r.v||0}},{key:"alpha",get:function(){return this.o.v}}]),a}(),pe=function(){function e(t){c(this,e),this.elem=t,this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1,this.transform=null,this.masks=null,this.shapes=null,this._hasOutTypeExpression=!1,this.needUpdateOverlap=!1,this.isOverlapMode=!1,this.visible=!0,this._isFirstFrame=!0}return p(e,[{key:"initFrame",value:function(t,e){this.layer=t;var s=e.local,i=e.global;this.session=e,this.isOverlapLayer=this.layer.op>=s.op-s.st,this.isOverlapMode=i.overlapMode,this.parseLayer(t,e)}},{key:"outTypeExpressionMode",value:function(){this._hasOutTypeExpression=!0,this.isOverlapLayer&&(this.needUpdateOverlap=!0)}},{key:"prepareProperties",value:function(t,e){var s,i=this.dynamicProperties.length;for(s=0;s<i;s+=1)(e||this.needUpdateOverlap||this.elem._isParent&&"transform"===this.dynamicProperties[s].propType)&&(this.dynamicProperties[s].getValue(t),this.dynamicProperties[s]._mdf&&(this._mdf=!0))}},{key:"addDynamicProperty",value:function(t){-1===this.dynamicProperties.indexOf(t)&&this.dynamicProperties.push(t)}},{key:"parseLayer",value:function(t,e){var s=t.ks,i=t.hasMask,a=t.masksProperties,r=t.shapes,n=t.tm;if(s&&(this.transform=new oe(this,s,e)),i&&(this.masks=new Xt(this,a,e)),r&&(this.shapes=new he(this,r,e)),n){var h=e.global.frameRate;this.tm=At.getProp(this,n,0,h,this)}}},{key:"updateFrame",value:function(t){this._mdf=!1;var e=k.inRange(t,this.layer.ip,this.layer.op);this.isOverlapMode&&this.isOverlapLayer?this.visible=t>=this.layer.ip:this.visible=e,this.prepareProperties(t,e)}},{key:"updateDisplay",value:function(){var t=this.elem.display;this.elem._isRoot||(this.visible?t.show():t.hide(),(this._mdf||this.transform._mdf||this._isFirstFrame)&&t.updateLottieTransform(this.transform),this.masks&&(this.masks._mdf||this._isFirstFrame)&&t.updateLottieMasks(this.masks)),this._isFirstFrame=!1}}]),e}(),le=function(){function e(t){c(this,e),this.data=t,void 0===this.data.sr&&(this.data.sr=1),this.offsetTime=t.st||0,this.fullname=t.nm||"",this.idname=t.ln||"",this.classnames=t.cl?t.cl.split(" "):[],this.bodymovin=new pe(this),this.displayType="",this.display=null,this.hierarchy=null,this.lottieTreeParent=null}return p(e,[{key:"initBodymovin",value:function(t,e){this.bodymovin.initFrame(t,e),this.display&&this.display.onSetupLottie&&this.display.onSetupLottie()}},{key:"hasValidMasks",value:function(){return!(!this.bodymovin.masks||!this.bodymovin.masks.hasMasks)}},{key:"setHierarchy",value:function(t){this.hierarchy=t,this.display.setHierarchy(t.display)}},{key:"initDisplayInstance",value:function(t,e){return new(Gt(t))(this,e)}},{key:"updateFrame",value:function(t){this.bodymovin.updateFrame(t),this.bodymovin.updateDisplay()}}]),e}(),ue=function(t){function h(t,e){var s;c(this,h),s=v(this,d(h).call(this,t));var i=e.global,a={layer:t,session:s.session=e};if(i.maskComp){a.maskComp=i.maskComp;var r=t.w,n=t.h;a.viewport={w:r,h:n}}return s.config=a,s.childNodes=[],s.displayType=Kt.Type.Component,s.innerDisplay=null,s.display=s.initDisplayInstance(s.displayType,a),s.initBodymovin(t,e),s}return l(h,le),p(h,[{key:"updateFrame",value:function(t){if(this.bodymovin.updateFrame(t),this.bodymovin.updateDisplay(),t-=this.offsetTime,this.bodymovin.tm){var e=this.bodymovin.tm.v;e===this.data.op&&(e=this.data.op-1),t=e}else t/=this.data.sr;for(var s=0;s<this.childNodes.length;s++)this.childNodes[s].updateFrame(t)}},{key:"addChild",value:function(t){(t.lottieTreeParent=this).childNodes.push(t),this.innerDisplay?this.innerDisplay.addChild(t.display):this.display.addChild(t.display)}}]),h}(),fe=function(t){function a(t,e){var s;c(this,a),s=v(this,d(a).call(this,t));var i={layer:t,session:e,rect:{x:0,y:0,width:t.sw,height:t.sh},color:t.sc};return s.config=i,s.session=e,s.displayType=Kt.Type.Solid,s.display=s.initDisplayInstance(s.displayType,i),s.initBodymovin(t,e),s}return l(a,le),a}(),ce=function(t){function o(t,e){var s;c(this,o),s=v(this,d(o).call(this,t));var i=e.global,a=i.textureLoader,r=i.assets,n=k.getAssets(t.refId,r),h={layer:t,session:e,texture:a.getTextureById(n.id),asset:n};return s.config=h,s.session=e,s.displayType=Kt.Type.Sprite,s.display=s.initDisplayInstance(s.displayType,h),s.initBodymovin(t,e),s}return l(o,le),o}(),de=function(t){function a(t,e){var s;c(this,a);var i={layer:t,session:e};return(s=v(this,d(a).call(this,t))).config=i,s.session=e,s.displayType=Kt.Type.Shape,s.display=s.initDisplayInstance(s.displayType,i),s.initBodymovin(t,e),s}return l(a,le),a}(),me=function(t){function a(t,e){var s;c(this,a);var i={layer:t,session:e};return(s=v(this,d(a).call(this,t))).config=i,s.session=e,s.displayType=Kt.Type.Null,s.display=s.initDisplayInstance(s.displayType,i),s.initBodymovin(t,e),s}return l(a,le),a}(),ve=function(t){function n(t){var e;c(this,n),(e=v(this,d(n).call(this))).living=!0,e.infinite=t.infinite||!1,e.repeats=t.repeats||0,e.alternate=t.alternate||!1,e.wait=t.wait||0,e.delay=t.delay||0,e.overlapMode=t.overlapMode||!1,e.timeScale=k.isNumber(t.timeScale)?t.timeScale:1,e.frameNum=0,e.isPaused=!0,e.direction=1,e._lastFrame=-1/0,e._repeatsCut=e.repeats,e._delayCut=e.delay,e._waitCut=e.wait,e.segments=t.segments||{},e._segmentName=t.initSegment||"",e._prefix=t.prefix||"",e._autoLoad=!k.isBoolean(t.autoLoad)||t.autoLoad,e._autoStart=!k.isBoolean(t.autoStart)||t.autoStart,e._justDisplayOnImagesLoaded=!k.isBoolean(t.justDisplayOnImagesLoaded)||t.justDisplayOnImagesLoaded,e._maskComp=t.maskComp||!1,e.textureLoader=null,e.jsonLoader=null,e.root=null,e.parent=null;var s,i,a=Gt(Kt.Type.Container);if(e.group=new a,e.display=null,e.isDisplayLoaded=!1,e.isImagesLoaded=!1,e._copyJSON=t.copyJSON||!1,t.keyframes)!e._prefix&&t.keyframes.prefix&&(e._prefix=t.keyframes.prefix),e._setupDate(t.keyframes);else if(t.path){var r="";r=-1!==t.path.lastIndexOf("\\")?t.path.substr(0,t.path.lastIndexOf("\\")+1):t.path.substr(0,t.path.lastIndexOf("/")+1),!e._prefix&&r&&(e._prefix=r),e.jsonLoader=(s=t.path,(i=g[_.Ajax])||console.warn("must register an ajax loader, before you parse an animation from path"),i(s)),e.jsonLoader.once("success",function(t){e._setupDate(t)}),e.jsonLoader.once("error",function(t){e.emit("error",t)})}return e}return l(n,f),p(n,[{key:"_setupDate",value:function(t){var e=this;this._sourceData=t,this._copyJSON&&(t=k.copyJSON(t)),C.completeData(t);var s=this.keyframes=t,i=s.w,a=s.h,r=s.st,n=void 0===r?0:r,h=s.fr,o=s.ip,p=s.op,l=s.assets;this.frameRate=h,this.frameMult=h/1e3,this._defaultSegment=[o,p];var u=this._segmentName&&this.segments[this._segmentName]||this._defaultSegment;this.beginFrame=u[0],this.endFrame=u[1],this._timePerFrame=1e3/h,this.duration=Math.floor(this.endFrame-this.beginFrame);var f,c,d,m=null,v=l.filter(function(t){return t.u||t.p});0<v.length?(this.textureLoader=(f=v,c={prefix:this._prefix,autoLoad:this._autoLoad},(d=g[_.Texture])||console.warn("must register an image loader, before you parse an animation some has image assets"),m=d(f,c)),m.loaded?(this.isImagesLoaded=!0,this.isPaused=!this._autoStart,this.emit("ImageReady")):(m.once("complete",function(){e.isImagesLoaded=!0,e.emit("ImageReady")}),null!==this._pausedNeedSet&&(this._pausedNeedSet=!0,m.once("complete",function(){e._pausedNeedSet&&(e._pausedNeedSet=!1,e.isPaused=!e._autoStart)})))):(this.isImagesLoaded=!0,this.isPaused=!this._autoStart);var y={global:{assets:l,textureLoader:m,frameRate:h,maskComp:this._maskComp,overlapMode:this.overlapMode},local:{w:i,h:a,ip:o,op:p,st:n}};this._buildElements(y),null!==this.textureLoader&&this._justDisplayOnImagesLoaded&&!this.textureLoader.loaded&&null!==this._justDisplayNeedSet&&(this.group.visible=!1,this._justDisplayNeedSet=!0,this.textureLoader.once("complete",function(){e._justDisplayNeedSet&&(e._justDisplayNeedSet=!1,e.group.visible=!0)})),this.isDisplayLoaded=!0,this.update(0,!0)}},{key:"_buildElements",value:function(t){var e=this;this.root=this._extraCompositions(this.keyframes,t,!0),this.display=this.root.display,this.group.addChild(this.display),this.emit("DOMLoaded").emit("DisplayReady"),null===this.textureLoader?this.emit("success"):this.textureLoader.loaded?this.emit("success"):this.textureLoader.once("complete",function(){return e.emit("success")})}},{key:"_extraCompositions",value:function(t,e){var s=e.global,i=e.local,a=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=t.w,n=t.h,h=t.ip,o=t.op,p=t.st,l=void 0===p?0:p,u=new ue(t,{global:s,local:i});u._isRoot=a;for(var f=t.layers||k.getAssets(t.refId,s.assets).layers,c={global:s,local:{w:r,h:n,ip:h,op:o,st:l}},d=this._createElements(f,c),m=f.length-1;0<=m;m--){var v=f[m],y=d[v.ind];if(y){if(!k.isUndefined(v.parent)){var g=d[v.parent];g._isParent=!0,y.setHierarchy(g)}u.addChild(y)}}return u}},{key:"_createElements",value:function(t,e){for(var s={},i=t.length-1;0<=i;i--){var a=t[i],r=null;if(void 0===a.td){switch(a.ty){case 0:r=this._extraCompositions(a,e);break;case 1:r=new fe(a,e);break;case 2:r=new ce(a,e);break;case 3:r=new me(a,e);break;case 4:r=new de(a,e);break;default:continue}r&&(void 0===a.ind&&(a.ind=i),(s[a.ind]=r).name=a.nm||null)}}return s}},{key:"getDisplayByQuerySelector",value:function(t){var e=this.querySelector(t);return e&&e.display?e.display:(console.warn("can not find display which query with ",t),null)}},{key:"_queryMatch",value:function(t,e,s){var i=t.substr(0,1),a=t.substr(1,t.length),r=!1;return"#"===i?r=e.idname===a:"."===i&&(r=-1!==e.classnames.indexOf(a)),r&&s.push(e),r}},{key:"_searchNodes",value:function(t,e,s){var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(e.childNodes&&0<e.childNodes.length){for(var a=[],r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(this._queryMatch(t,n,s)&&i)return!0;n.childNodes&&0<n.childNodes.length&&a.push(n)}for(var h=0;h<a.length;h++)if(this._searchNodes(t,a[h],s,i))return!0}return!1}},{key:"querySelector",value:function(t){var e=[];return this._queryMatch(t,this.root,e)?e[0]:(this._searchNodes(t,this.root,e,!0),e[0]||null)}},{key:"querySelectorAll",value:function(t){var e=[],s="#"===t.substr(0,1);return this._queryMatch(t,this.root,e)&&s||this._searchNodes(t,this.root,e,s),e}},{key:"bindSlot",value:function(t,e){return this.getDisplayByQuerySelector(t).addChild(e),this}},{key:"unbindSlot",value:function(t,e){return this.getDisplayByQuerySelector(t).removeChild(e),this}},{key:"_emitFrame",value:function(t){this.emit("@".concat(t))}},{key:"update",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(this.living&&this.isDisplayLoaded&&(!this.isPaused||e)){var s=this._updateTime(t),i=this.beginFrame+this.frameNum;this.root.updateFrame(i);var a=i>>0;this._lastFrame!==a&&(this._emitFrame(0<this.direction?a:this._lastFrame),this._lastFrame=a),!1===s?(this.emit("enterFrame",i),this.emit("update",this.frameNum/this.duration)):this.hadEnded!==s&&!0===s&&this.emit("complete"),this.hadEnded=s}}},{key:"_updateTime",value:function(t){var e=this.direction*this.timeScale*t;if(0<this._waitCut)return this._waitCut-=Math.abs(e),null;if(this.isPaused||0<this._delayCut)return 0<this._delayCut&&(this._delayCut-=Math.abs(e)),null;this.frameNum+=e/this._timePerFrame;var s=!1;return this._spill()&&(0<this._repeatsCut||this.infinite?(0<this._repeatsCut&&--this._repeatsCut,this._delayCut=this.delay,this.alternate?(this.direction*=-1,this.frameNum=k.codomainBounce(this.frameNum,0,this.duration)):(this.direction=1,this.frameNum=k.euclideanModulo(this.frameNum,this.duration)),this.emit("loopComplete")):(this.overlapMode||(this.frameNum=k.clamp(this.frameNum,0,this.duration),this.living=!1),s=!0)),s}},{key:"_spill",value:function(){var t=this.frameNum<=0&&-1===this.direction,e=this.frameNum>=this.duration&&1===this.direction;return t||e}},{key:"frameToTime",value:function(t){return t*this._timePerFrame}},{key:"setSpeed",value:function(t){this.timeScale=t}},{key:"playSegment",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t){var s=null;k.isArray(t)?s=t:k.isString(t)&&(s=this.segments[t],k.isArray(s)&&(this._segmentName=t)),k.isArray(s)&&(this.beginFrame=k.isNumber(s[0])?s[0]:this._defaultSegment[0],this.endFrame=k.isNumber(s[1])?s[1]:this._defaultSegment[1],k.isNumber(e.repeats)&&(this.repeats=e.repeats),k.isBoolean(e.infinite)&&(this.infinite=e.infinite),k.isBoolean(e.alternate)&&(this.alternate=e.alternate),k.isNumber(e.wait)&&(this.wait=e.wait),k.isNumber(e.delay)&&(this.delay=e.delay),this.replay())}}},{key:"goToAndStop",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.frameNum=e?t:t*this.frameMult,this.update(0,!0),this.pause()}},{key:"goToAndPlay",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.frameNum=e?t:t*this.frameMult,this.update(0,!0),this.resume()}},{key:"getDuration",value:function(t){var e=this.endFrame-this.beginFrame;return t?e:e/this.frameRate}},{key:"setDirection",value:function(t){return this.direction=t<0?-1:1,this}},{key:"pause",value:function(){return this._pausedNeedSet?this._pausedNeedSet=!1:this._pausedNeedSet=null,this.isPaused=!0,this}},{key:"resume",value:function(){return this._pausedNeedSet?this._pausedNeedSet=!1:this._pausedNeedSet=null,this.isPaused=!1,this}},{key:"play",value:function(){return this.resume()}},{key:"replay",value:function(){return this._pausedNeedSet?this._pausedNeedSet=!1:this._pausedNeedSet=null,this.isPaused=!1,this._repeatsCut=this.repeats,this._delayCut=this.delay,this.living=!0,this.frameNum=0,this.duration=Math.floor(this.endFrame-this.beginFrame),this.direction=1,this}},{key:"show",value:function(){this._justDisplayNeedSet?this._justDisplayNeedSet=!1:this._justDisplayNeedSet=null,this.group.visible=!0}},{key:"hide",value:function(){this._justDisplayNeedSet?this._justDisplayNeedSet=!1:this._justDisplayNeedSet=null,this.group.visible=!1}},{key:"destroy",value:function(){this.parent&&this.parent.remove(this),this.group.parent&&this.group.parent.removeChild(this.group),this.pause(),this.root=null,this.group=null,this.display=null,this.textureLoader.off("complete"),this.textureLoader=null,this.jsonLoader.off("complete"),this.jsonLoader=null,this.keyframes=null,this.living=!1}}]),n}(),ye=function(t){function s(t){var e;return c(this,s),(e=v(this,d(s).call(this)))._lastTime=0,e._snippet=0,e.timeScale=1,e.isPaused=!1,e.ticker=t.ticker?t.ticker:t,e.groups=[],e.update=e.update.bind(m(m(e))),e.ticker&&e.start(),e}return l(s,f),p(s,[{key:"add",value:function(t){var e=arguments.length;if(1<e)for(var s=0;s<e;s++)this.add(arguments[s]);else null!==t.parent&&t.parent.remove(t),(t.parent=this).groups.push(t);return t}},{key:"remove",value:function(t){if(1<arguments.length)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var s=this.groups.indexOf(t);-1!==s&&(t.parent=null,this.groups.splice(s,1))}},{key:"parseAnimation",value:function(t){var e=new ve(t);return this.add(e)}},{key:"setSpeed",value:function(t){this.timeScale=t}},{key:"start",value:function(){return this._lastTime=Date.now(),this.ticker.add(this.update),this}},{key:"stop",value:function(){return this.ticker.remove(this.update),this}},{key:"pause",value:function(){return this.isPaused=!0,this}},{key:"resume",value:function(){return this.isPaused=!1,this}},{key:"update",value:function(){if(this.timeline(),!this.isPaused){for(var t=this.timeScale*this._snippet,e=this.groups.length,s=0;s<e;s++){this.groups[s].update(t)}this.emit("update",this._snippet)}}},{key:"timeline",value:function(){var t=Date.now()-this._lastTime;(!this._lastTime||200<t)&&(this._lastTime=Date.now(),t=Date.now()-this._lastTime),this._lastTime+=t,this._snippet=t}},{key:"destroy",value:function(){for(var t=this.groups.length-1;0<=t;t--)this.groups[t].destroy()}}]),s}();t.AnimationGroup=ve,t.AnimationManager=ye,t.BezierEasing=Y,t.DisplayRegister=Kt,t.Eventer=f,t.LoaderRegister=y,t.PropertyFactory=At,t.Tools=k,t.TransformFrames=oe,t.TransformProperty=Ht,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
